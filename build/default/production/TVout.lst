MPLAB XC16 ASSEMBLY Listing:  build/default/production/TVout.s 			page 1


   1              	# 1 "TVout.S"
   2              	# 1 "<built-in>"
   1              	; vidéo NTSC B/W sur PIC24FJ64G002
   0              	
   0              	
   2              	; T2 période ligne horizontale
   3              	; OC1 sortie sync  sur RPB4
   4              	; OC2 contrôle début sortie vidéo
   5              	; sortie vidéo sur RPB3
   6              	
   7              	.include "hardware.inc"
   1              	.include "p24Fxxxx.inc"
   1              	.ifdef __24F04KA200
   2              	.include "p24F04KA200.inc"
   3              	.equ VALID_ID,1
   4              	.endif
   5              	
   6              	.ifdef __24F04KA201
   7              	.include "p24F04KA201.inc"
   8              	.equ VALID_ID,1
   9              	.endif
  10              	
  11              	.ifdef __24F04KL100
  12              	.include "p24F04KL100.inc"
  13              	.equ VALID_ID,1
  14              	.endif
  15              	
  16              	.ifdef __24F04KL101
  17              	.include "p24F04KL101.inc"
  18              	.equ VALID_ID,1
  19              	.endif
  20              	
  21              	.ifdef __24F08KA101
  22              	.include "p24F08KA101.inc"
  23              	.equ VALID_ID,1
  24              	.endif
  25              	
  26              	.ifdef __24F08KA102
  27              	.include "p24F08KA102.inc"
  28              	.equ VALID_ID,1
  29              	.endif
  30              	
  31              	.ifdef __24F08KL200
  32              	.include "p24F08KL200.inc"
  33              	.equ VALID_ID,1
  34              	.endif
  35              	
  36              	.ifdef __24F08KL201
  37              	.include "p24F08KL201.inc"
  38              	.equ VALID_ID,1
  39              	.endif
  40              	
  41              	.ifdef __24F08KL301
  42              	.include "p24F08KL301.inc"
  43              	.equ VALID_ID,1
  44              	.endif
  45              	
MPLAB XC16 ASSEMBLY Listing:  build/default/production/TVout.s 			page 2


  46              	.ifdef __24F08KL302
  47              	.include "p24F08KL302.inc"
  48              	.equ VALID_ID,1
  49              	.endif
  50              	
  51              	.ifdef __24F08KL401
  52              	.include "p24F08KL401.inc"
  53              	.equ VALID_ID,1
  54              	.endif
  55              	
  56              	.ifdef __24F08KL402
  57              	.include "p24F08KL402.inc"
  58              	.equ VALID_ID,1
  59              	.endif
  60              	
  61              	.ifdef __24F08KM101
  62              	.include "p24F08KM101.inc"
  63              	.equ VALID_ID,1
  64              	.endif
  65              	
  66              	.ifdef __24F08KM102
  67              	.include "p24F08KM102.inc"
  68              	.equ VALID_ID,1
  69              	.endif
  70              	
  71              	.ifdef __24F08KM202
  72              	.include "p24F08KM202.inc"
  73              	.equ VALID_ID,1
  74              	.endif
  75              	
  76              	.ifdef __24F08KM204
  77              	.include "p24F08KM204.inc"
  78              	.equ VALID_ID,1
  79              	.endif
  80              	
  81              	.ifdef __24F16KA101
  82              	.include "p24F16KA101.inc"
  83              	.equ VALID_ID,1
  84              	.endif
  85              	
  86              	.ifdef __24F16KA102
  87              	.include "p24F16KA102.inc"
  88              	.equ VALID_ID,1
  89              	.endif
  90              	
  91              	.ifdef __24F16KA301
  92              	.include "p24F16KA301.inc"
  93              	.equ VALID_ID,1
  94              	.endif
  95              	
  96              	.ifdef __24F16KA302
  97              	.include "p24F16KA302.inc"
  98              	.equ VALID_ID,1
  99              	.endif
 100              	
 101              	.ifdef __24F16KA304
 102              	.include "p24F16KA304.inc"
MPLAB XC16 ASSEMBLY Listing:  build/default/production/TVout.s 			page 3


 103              	.equ VALID_ID,1
 104              	.endif
 105              	
 106              	.ifdef __24F16KL401
 107              	.include "p24F16KL401.inc"
 108              	.equ VALID_ID,1
 109              	.endif
 110              	
 111              	.ifdef __24F16KL402
 112              	.include "p24F16KL402.inc"
 113              	.equ VALID_ID,1
 114              	.endif
 115              	
 116              	.ifdef __24F16KM102
 117              	.include "p24F16KM102.inc"
 118              	.equ VALID_ID,1
 119              	.endif
 120              	
 121              	.ifdef __24F16KM104
 122              	.include "p24F16KM104.inc"
 123              	.equ VALID_ID,1
 124              	.endif
 125              	
 126              	.ifdef __24F16KM202
 127              	.include "p24F16KM202.inc"
 128              	.equ VALID_ID,1
 129              	.endif
 130              	
 131              	.ifdef __24F16KM204
 132              	.include "p24F16KM204.inc"
 133              	.equ VALID_ID,1
 134              	.endif
 135              	
 136              	.ifdef __24F32KA301
 137              	.include "p24F32KA301.inc"
 138              	.equ VALID_ID,1
 139              	.endif
 140              	
 141              	.ifdef __24F32KA302
 142              	.include "p24F32KA302.inc"
 143              	.equ VALID_ID,1
 144              	.endif
 145              	
 146              	.ifdef __24F32KA304
 147              	.include "p24F32KA304.inc"
 148              	.equ VALID_ID,1
 149              	.endif
 150              	
 151              	.ifdef __24FJ1024GA606
 152              	.include "p24FJ1024GA606.inc"
 153              	.equ VALID_ID,1
 154              	.endif
 155              	
 156              	.ifdef __24FJ1024GA610
 157              	.include "p24FJ1024GA610.inc"
 158              	.equ VALID_ID,1
 159              	.endif
MPLAB XC16 ASSEMBLY Listing:  build/default/production/TVout.s 			page 4


 160              	
 161              	.ifdef __24FJ1024GB606
 162              	.include "p24FJ1024GB606.inc"
 163              	.equ VALID_ID,1
 164              	.endif
 165              	
 166              	.ifdef __24FJ1024GB610
 167              	.include "p24FJ1024GB610.inc"
 168              	.equ VALID_ID,1
 169              	.endif
 170              	
 171              	.ifdef __24FJ128DA106
 172              	.include "p24FJ128DA106.inc"
 173              	.equ VALID_ID,1
 174              	.endif
 175              	
 176              	.ifdef __24FJ128DA110
 177              	.include "p24FJ128DA110.inc"
 178              	.equ VALID_ID,1
 179              	.endif
 180              	
 181              	.ifdef __24FJ128DA206
 182              	.include "p24FJ128DA206.inc"
 183              	.equ VALID_ID,1
 184              	.endif
 185              	
 186              	.ifdef __24FJ128DA210
 187              	.include "p24FJ128DA210.inc"
 188              	.equ VALID_ID,1
 189              	.endif
 190              	
 191              	.ifdef __24FJ128GA006
 192              	.include "p24FJ128GA006.inc"
 193              	.equ VALID_ID,1
 194              	.endif
 195              	
 196              	.ifdef __24FJ128GA008
 197              	.include "p24FJ128GA008.inc"
 198              	.equ VALID_ID,1
 199              	.endif
 200              	
 201              	.ifdef __24FJ128GA010
 202              	.include "p24FJ128GA010.inc"
 203              	.equ VALID_ID,1
 204              	.endif
 205              	
 206              	.ifdef __24FJ128GA106
 207              	.include "p24FJ128GA106.inc"
 208              	.equ VALID_ID,1
 209              	.endif
 210              	
 211              	.ifdef __24FJ128GA108
 212              	.include "p24FJ128GA108.inc"
 213              	.equ VALID_ID,1
 214              	.endif
 215              	
 216              	.ifdef __24FJ128GA110
MPLAB XC16 ASSEMBLY Listing:  build/default/production/TVout.s 			page 5


 217              	.include "p24FJ128GA110.inc"
 218              	.equ VALID_ID,1
 219              	.endif
 220              	
 221              	.ifdef __24FJ128GA202
 222              	.include "p24FJ128GA202.inc"
 223              	.equ VALID_ID,1
 224              	.endif
 225              	
 226              	.ifdef __24FJ128GA204
 227              	.include "p24FJ128GA204.inc"
 228              	.equ VALID_ID,1
 229              	.endif
 230              	
 231              	.ifdef __24FJ128GA306
 232              	.include "p24FJ128GA306.inc"
 233              	.equ VALID_ID,1
 234              	.endif
 235              	
 236              	.ifdef __24FJ128GA308
 237              	.include "p24FJ128GA308.inc"
 238              	.equ VALID_ID,1
 239              	.endif
 240              	
 241              	.ifdef __24FJ128GA310
 242              	.include "p24FJ128GA310.inc"
 243              	.equ VALID_ID,1
 244              	.endif
 245              	
 246              	.ifdef __24FJ128GA406
 247              	.include "p24FJ128GA406.inc"
 248              	.equ VALID_ID,1
 249              	.endif
 250              	
 251              	.ifdef __24FJ128GA410
 252              	.include "p24FJ128GA410.inc"
 253              	.equ VALID_ID,1
 254              	.endif
 255              	
 256              	.ifdef __24FJ128GA412
 257              	.include "p24FJ128GA412.inc"
 258              	.equ VALID_ID,1
 259              	.endif
 260              	
 261              	.ifdef __24FJ128GA606
 262              	.include "p24FJ128GA606.inc"
 263              	.equ VALID_ID,1
 264              	.endif
 265              	
 266              	.ifdef __24FJ128GA610
 267              	.include "p24FJ128GA610.inc"
 268              	.equ VALID_ID,1
 269              	.endif
 270              	
 271              	.ifdef __24FJ128GB106
 272              	.include "p24FJ128GB106.inc"
 273              	.equ VALID_ID,1
MPLAB XC16 ASSEMBLY Listing:  build/default/production/TVout.s 			page 6


 274              	.endif
 275              	
 276              	.ifdef __24FJ128GB108
 277              	.include "p24FJ128GB108.inc"
 278              	.equ VALID_ID,1
 279              	.endif
 280              	
 281              	.ifdef __24FJ128GB110
 282              	.include "p24FJ128GB110.inc"
 283              	.equ VALID_ID,1
 284              	.endif
 285              	
 286              	.ifdef __24FJ128GB202
 287              	.include "p24FJ128GB202.inc"
 288              	.equ VALID_ID,1
 289              	.endif
 290              	
 291              	.ifdef __24FJ128GB204
 292              	.include "p24FJ128GB204.inc"
 293              	.equ VALID_ID,1
 294              	.endif
 295              	
 296              	.ifdef __24FJ128GB206
 297              	.include "p24FJ128GB206.inc"
 298              	.equ VALID_ID,1
 299              	.endif
 300              	
 301              	.ifdef __24FJ128GB210
 302              	.include "p24FJ128GB210.inc"
 303              	.equ VALID_ID,1
 304              	.endif
 305              	
 306              	.ifdef __24FJ128GB406
 307              	.include "p24FJ128GB406.inc"
 308              	.equ VALID_ID,1
 309              	.endif
 310              	
 311              	.ifdef __24FJ128GB410
 312              	.include "p24FJ128GB410.inc"
 313              	.equ VALID_ID,1
 314              	.endif
 315              	
 316              	.ifdef __24FJ128GB412
 317              	.include "p24FJ128GB412.inc"
 318              	.equ VALID_ID,1
 319              	.endif
 320              	
 321              	.ifdef __24FJ128GB606
 322              	.include "p24FJ128GB606.inc"
 323              	.equ VALID_ID,1
 324              	.endif
 325              	
 326              	.ifdef __24FJ128GB610
 327              	.include "p24FJ128GB610.inc"
 328              	.equ VALID_ID,1
 329              	.endif
 330              	
MPLAB XC16 ASSEMBLY Listing:  build/default/production/TVout.s 			page 7


 331              	.ifdef __24FJ128GC006
 332              	.include "p24FJ128GC006.inc"
 333              	.equ VALID_ID,1
 334              	.endif
 335              	
 336              	.ifdef __24FJ128GC010
 337              	.include "p24FJ128GC010.inc"
 338              	.equ VALID_ID,1
 339              	.endif
 340              	
 341              	.ifdef __24FJ16GA002
 342              	.include "p24FJ16GA002.inc"
 343              	.equ VALID_ID,1
 344              	.endif
 345              	
 346              	.ifdef __24FJ16GA004
 347              	.include "p24FJ16GA004.inc"
 348              	.equ VALID_ID,1
 349              	.endif
 350              	
 351              	.ifdef __24FJ16MC101
 352              	.include "p24FJ16MC101.inc"
 353              	.equ VALID_ID,1
 354              	.endif
 355              	
 356              	.ifdef __24FJ16MC102
 357              	.include "p24FJ16MC102.inc"
 358              	.equ VALID_ID,1
 359              	.endif
 360              	
 361              	.ifdef __24FJ192GA106
 362              	.include "p24FJ192GA106.inc"
 363              	.equ VALID_ID,1
 364              	.endif
 365              	
 366              	.ifdef __24FJ192GA108
 367              	.include "p24FJ192GA108.inc"
 368              	.equ VALID_ID,1
 369              	.endif
 370              	
 371              	.ifdef __24FJ192GA110
 372              	.include "p24FJ192GA110.inc"
 373              	.equ VALID_ID,1
 374              	.endif
 375              	
 376              	.ifdef __24FJ192GB106
 377              	.include "p24FJ192GB106.inc"
 378              	.equ VALID_ID,1
 379              	.endif
 380              	
 381              	.ifdef __24FJ192GB108
 382              	.include "p24FJ192GB108.inc"
 383              	.equ VALID_ID,1
 384              	.endif
 385              	
 386              	.ifdef __24FJ192GB110
 387              	.include "p24FJ192GB110.inc"
MPLAB XC16 ASSEMBLY Listing:  build/default/production/TVout.s 			page 8


 388              	.equ VALID_ID,1
 389              	.endif
 390              	
 391              	.ifdef __24FJ256DA106
 392              	.include "p24FJ256DA106.inc"
 393              	.equ VALID_ID,1
 394              	.endif
 395              	
 396              	.ifdef __24FJ256DA110
 397              	.include "p24FJ256DA110.inc"
 398              	.equ VALID_ID,1
 399              	.endif
 400              	
 401              	.ifdef __24FJ256DA206
 402              	.include "p24FJ256DA206.inc"
 403              	.equ VALID_ID,1
 404              	.endif
 405              	
 406              	.ifdef __24FJ256DA210
 407              	.include "p24FJ256DA210.inc"
 408              	.equ VALID_ID,1
 409              	.endif
 410              	
 411              	.ifdef __24FJ256GA106
 412              	.include "p24FJ256GA106.inc"
 413              	.equ VALID_ID,1
 414              	.endif
 415              	
 416              	.ifdef __24FJ256GA108
 417              	.include "p24FJ256GA108.inc"
 418              	.equ VALID_ID,1
 419              	.endif
 420              	
 421              	.ifdef __24FJ256GA110
 422              	.include "p24FJ256GA110.inc"
 423              	.equ VALID_ID,1
 424              	.endif
 425              	
 426              	.ifdef __24FJ256GA406
 427              	.include "p24FJ256GA406.inc"
 428              	.equ VALID_ID,1
 429              	.endif
 430              	
 431              	.ifdef __24FJ256GA410
 432              	.include "p24FJ256GA410.inc"
 433              	.equ VALID_ID,1
 434              	.endif
 435              	
 436              	.ifdef __24FJ256GA412
 437              	.include "p24FJ256GA412.inc"
 438              	.equ VALID_ID,1
 439              	.endif
 440              	
 441              	.ifdef __24FJ256GA606
 442              	.include "p24FJ256GA606.inc"
 443              	.equ VALID_ID,1
 444              	.endif
MPLAB XC16 ASSEMBLY Listing:  build/default/production/TVout.s 			page 9


 445              	
 446              	.ifdef __24FJ256GA610
 447              	.include "p24FJ256GA610.inc"
 448              	.equ VALID_ID,1
 449              	.endif
 450              	
 451              	.ifdef __24FJ256GB106
 452              	.include "p24FJ256GB106.inc"
 453              	.equ VALID_ID,1
 454              	.endif
 455              	
 456              	.ifdef __24FJ256GB108
 457              	.include "p24FJ256GB108.inc"
 458              	.equ VALID_ID,1
 459              	.endif
 460              	
 461              	.ifdef __24FJ256GB110
 462              	.include "p24FJ256GB110.inc"
 463              	.equ VALID_ID,1
 464              	.endif
 465              	
 466              	.ifdef __24FJ256GB206
 467              	.include "p24FJ256GB206.inc"
 468              	.equ VALID_ID,1
 469              	.endif
 470              	
 471              	.ifdef __24FJ256GB210
 472              	.include "p24FJ256GB210.inc"
 473              	.equ VALID_ID,1
 474              	.endif
 475              	
 476              	.ifdef __24FJ256GB406
 477              	.include "p24FJ256GB406.inc"
 478              	.equ VALID_ID,1
 479              	.endif
 480              	
 481              	.ifdef __24FJ256GB410
 482              	.include "p24FJ256GB410.inc"
 483              	.equ VALID_ID,1
 484              	.endif
 485              	
 486              	.ifdef __24FJ256GB412
 487              	.include "p24FJ256GB412.inc"
 488              	.equ VALID_ID,1
 489              	.endif
 490              	
 491              	.ifdef __24FJ256GB606
 492              	.include "p24FJ256GB606.inc"
 493              	.equ VALID_ID,1
 494              	.endif
 495              	
 496              	.ifdef __24FJ256GB610
 497              	.include "p24FJ256GB610.inc"
 498              	.equ VALID_ID,1
 499              	.endif
 500              	
 501              	.ifdef __24FJ32GA002
MPLAB XC16 ASSEMBLY Listing:  build/default/production/TVout.s 			page 10


 502              	.include "p24FJ32GA002.inc"
 503              	.equ VALID_ID,1
 504              	.endif
 505              	
 506              	.ifdef __24FJ32GA004
 507              	.include "p24FJ32GA004.inc"
 508              	.equ VALID_ID,1
 509              	.endif
 510              	
 511              	.ifdef __24FJ32GA102
 512              	.include "p24FJ32GA102.inc"
 513              	.equ VALID_ID,1
 514              	.endif
 515              	
 516              	.ifdef __24FJ32GA104
 517              	.include "p24FJ32GA104.inc"
 518              	.equ VALID_ID,1
 519              	.endif
 520              	
 521              	.ifdef __24FJ32GB002
 522              	.include "p24FJ32GB002.inc"
 523              	.equ VALID_ID,1
 524              	.endif
 525              	
 526              	.ifdef __24FJ32GB004
 527              	.include "p24FJ32GB004.inc"
 528              	.equ VALID_ID,1
 529              	.endif
 530              	
 531              	.ifdef __24FJ32MC101
 532              	.include "p24FJ32MC101.inc"
 533              	.equ VALID_ID,1
 534              	.endif
 535              	
 536              	.ifdef __24FJ32MC102
 537              	.include "p24FJ32MC102.inc"
 538              	.equ VALID_ID,1
 539              	.endif
 540              	
 541              	.ifdef __24FJ32MC104
 542              	.include "p24FJ32MC104.inc"
 543              	.equ VALID_ID,1
 544              	.endif
 545              	
 546              	.ifdef __24FJ48GA002
 547              	.include "p24FJ48GA002.inc"
 548              	.equ VALID_ID,1
 549              	.endif
 550              	
 551              	.ifdef __24FJ48GA004
 552              	.include "p24FJ48GA004.inc"
 553              	.equ VALID_ID,1
 554              	.endif
 555              	
 556              	.ifdef __24FJ512GA606
 557              	.include "p24FJ512GA606.inc"
 558              	.equ VALID_ID,1
MPLAB XC16 ASSEMBLY Listing:  build/default/production/TVout.s 			page 11


 559              	.endif
 560              	
 561              	.ifdef __24FJ512GA610
 562              	.include "p24FJ512GA610.inc"
 563              	.equ VALID_ID,1
 564              	.endif
 565              	
 566              	.ifdef __24FJ512GB606
 567              	.include "p24FJ512GB606.inc"
 568              	.equ VALID_ID,1
 569              	.endif
 570              	
 571              	.ifdef __24FJ512GB610
 572              	.include "p24FJ512GB610.inc"
 573              	.equ VALID_ID,1
 574              	.endif
 575              	
 576              	.ifdef __24FJ64GA002
 577              	.include "p24FJ64GA002.inc"
   1              	;==========================================================================
   2              	;  PIC24FJ64GA002 Standard Assembly Include File
   3              	; 
   4              	;  (c) Copyright 2014 Microchip Technology, All rights reserved
   5              	;  Part support version v1.23.A(26-Sep-2014)
   6              	;==========================================================================
   7              	
 2675              	.LIST
 578              	.equ VALID_ID,1
 579              	.endif
 580              	
 581              	.ifdef __24FJ64GA004
 582              	.include "p24FJ64GA004.inc"
 583              	.equ VALID_ID,1
 584              	.endif
 585              	
 586              	.ifdef __24FJ64GA006
 587              	.include "p24FJ64GA006.inc"
 588              	.equ VALID_ID,1
 589              	.endif
 590              	
 591              	.ifdef __24FJ64GA008
 592              	.include "p24FJ64GA008.inc"
 593              	.equ VALID_ID,1
 594              	.endif
 595              	
 596              	.ifdef __24FJ64GA010
 597              	.include "p24FJ64GA010.inc"
 598              	.equ VALID_ID,1
 599              	.endif
 600              	
 601              	.ifdef __24FJ64GA102
 602              	.include "p24FJ64GA102.inc"
 603              	.equ VALID_ID,1
 604              	.endif
 605              	
 606              	.ifdef __24FJ64GA104
 607              	.include "p24FJ64GA104.inc"
MPLAB XC16 ASSEMBLY Listing:  build/default/production/TVout.s 			page 12


 608              	.equ VALID_ID,1
 609              	.endif
 610              	
 611              	.ifdef __24FJ64GA106
 612              	.include "p24FJ64GA106.inc"
 613              	.equ VALID_ID,1
 614              	.endif
 615              	
 616              	.ifdef __24FJ64GA108
 617              	.include "p24FJ64GA108.inc"
 618              	.equ VALID_ID,1
 619              	.endif
 620              	
 621              	.ifdef __24FJ64GA110
 622              	.include "p24FJ64GA110.inc"
 623              	.equ VALID_ID,1
 624              	.endif
 625              	
 626              	.ifdef __24FJ64GA202
 627              	.include "p24FJ64GA202.inc"
 628              	.equ VALID_ID,1
 629              	.endif
 630              	
 631              	.ifdef __24FJ64GA204
 632              	.include "p24FJ64GA204.inc"
 633              	.equ VALID_ID,1
 634              	.endif
 635              	
 636              	.ifdef __24FJ64GA306
 637              	.include "p24FJ64GA306.inc"
 638              	.equ VALID_ID,1
 639              	.endif
 640              	
 641              	.ifdef __24FJ64GA308
 642              	.include "p24FJ64GA308.inc"
 643              	.equ VALID_ID,1
 644              	.endif
 645              	
 646              	.ifdef __24FJ64GA310
 647              	.include "p24FJ64GA310.inc"
 648              	.equ VALID_ID,1
 649              	.endif
 650              	
 651              	.ifdef __24FJ64GA406
 652              	.include "p24FJ64GA406.inc"
 653              	.equ VALID_ID,1
 654              	.endif
 655              	
 656              	.ifdef __24FJ64GA410
 657              	.include "p24FJ64GA410.inc"
 658              	.equ VALID_ID,1
 659              	.endif
 660              	
 661              	.ifdef __24FJ64GA412
 662              	.include "p24FJ64GA412.inc"
 663              	.equ VALID_ID,1
 664              	.endif
MPLAB XC16 ASSEMBLY Listing:  build/default/production/TVout.s 			page 13


 665              	
 666              	.ifdef __24FJ64GB002
 667              	.include "p24FJ64GB002.inc"
 668              	.equ VALID_ID,1
 669              	.endif
 670              	
 671              	.ifdef __24FJ64GB004
 672              	.include "p24FJ64GB004.inc"
 673              	.equ VALID_ID,1
 674              	.endif
 675              	
 676              	.ifdef __24FJ64GB106
 677              	.include "p24FJ64GB106.inc"
 678              	.equ VALID_ID,1
 679              	.endif
 680              	
 681              	.ifdef __24FJ64GB108
 682              	.include "p24FJ64GB108.inc"
 683              	.equ VALID_ID,1
 684              	.endif
 685              	
 686              	.ifdef __24FJ64GB110
 687              	.include "p24FJ64GB110.inc"
 688              	.equ VALID_ID,1
 689              	.endif
 690              	
 691              	.ifdef __24FJ64GB202
 692              	.include "p24FJ64GB202.inc"
 693              	.equ VALID_ID,1
 694              	.endif
 695              	
 696              	.ifdef __24FJ64GB204
 697              	.include "p24FJ64GB204.inc"
 698              	.equ VALID_ID,1
 699              	.endif
 700              	
 701              	.ifdef __24FJ64GB406
 702              	.include "p24FJ64GB406.inc"
 703              	.equ VALID_ID,1
 704              	.endif
 705              	
 706              	.ifdef __24FJ64GB410
 707              	.include "p24FJ64GB410.inc"
 708              	.equ VALID_ID,1
 709              	.endif
 710              	
 711              	.ifdef __24FJ64GB412
 712              	.include "p24FJ64GB412.inc"
 713              	.equ VALID_ID,1
 714              	.endif
 715              	
 716              	.ifdef __24FJ64GC006
 717              	.include "p24FJ64GC006.inc"
 718              	.equ VALID_ID,1
 719              	.endif
 720              	
 721              	.ifdef __24FJ64GC010
MPLAB XC16 ASSEMBLY Listing:  build/default/production/TVout.s 			page 14


 722              	.include "p24FJ64GC010.inc"
 723              	.equ VALID_ID,1
 724              	.endif
 725              	
 726              	.ifdef __24FJ96GA006
 727              	.include "p24FJ96GA006.inc"
 728              	.equ VALID_ID,1
 729              	.endif
 730              	
 731              	.ifdef __24FJ96GA008
 732              	.include "p24FJ96GA008.inc"
 733              	.equ VALID_ID,1
 734              	.endif
 735              	
 736              	.ifdef __24FJ96GA010
 737              	.include "p24FJ96GA010.inc"
 738              	.equ VALID_ID,1
 739              	.endif
 740              	
 741              	.ifdef __24FV08KM101
 742              	.include "p24FV08KM101.inc"
 743              	.equ VALID_ID,1
 744              	.endif
 745              	
 746              	.ifdef __24FV08KM102
 747              	.include "p24FV08KM102.inc"
 748              	.equ VALID_ID,1
 749              	.endif
 750              	
 751              	.ifdef __24FV08KM202
 752              	.include "p24FV08KM202.inc"
 753              	.equ VALID_ID,1
 754              	.endif
 755              	
 756              	.ifdef __24FV08KM204
 757              	.include "p24FV08KM204.inc"
 758              	.equ VALID_ID,1
 759              	.endif
 760              	
 761              	.ifdef __24FV16KA301
 762              	.include "p24FV16KA301.inc"
 763              	.equ VALID_ID,1
 764              	.endif
 765              	
 766              	.ifdef __24FV16KA302
 767              	.include "p24FV16KA302.inc"
 768              	.equ VALID_ID,1
 769              	.endif
 770              	
 771              	.ifdef __24FV16KA304
 772              	.include "p24FV16KA304.inc"
 773              	.equ VALID_ID,1
 774              	.endif
 775              	
 776              	.ifdef __24FV16KM102
 777              	.include "p24FV16KM102.inc"
 778              	.equ VALID_ID,1
MPLAB XC16 ASSEMBLY Listing:  build/default/production/TVout.s 			page 15


 779              	.endif
 780              	
 781              	.ifdef __24FV16KM104
 782              	.include "p24FV16KM104.inc"
 783              	.equ VALID_ID,1
 784              	.endif
 785              	
 786              	.ifdef __24FV16KM202
 787              	.include "p24FV16KM202.inc"
 788              	.equ VALID_ID,1
 789              	.endif
 790              	
 791              	.ifdef __24FV16KM204
 792              	.include "p24FV16KM204.inc"
 793              	.equ VALID_ID,1
 794              	.endif
 795              	
 796              	.ifdef __24FV32KA301
 797              	.include "p24FV32KA301.inc"
 798              	.equ VALID_ID,1
 799              	.endif
 800              	
 801              	.ifdef __24FV32KA302
 802              	.include "p24FV32KA302.inc"
 803              	.equ VALID_ID,1
 804              	.endif
 805              	
 806              	.ifdef __24FV32KA304
 807              	.include "p24FV32KA304.inc"
 808              	.equ VALID_ID,1
 809              	.endif
 810              	
 811              	.ifndef VALID_ID
 812              	.error "processor ID not specified in generic include file"
 813              	.endif
   2              	
  61              	.LIST
  62              	
  63              	
   8              	.include "ntsc_const.inc"
   1              	
   2              	;résolution d'image
   3              	.equ XRES, 320
   4              	.equ YRES, 200
   5              	.equ BPL, (XRES/8)
   6              	.equ ROW, (YRES/8)
   7              	.equ TV_BUFFER, (ROW*BPL)
   8              	
   9              	
  10              	; constantes génération signal NTSC
  11              	.equ HFREQ, 15748 ; fréquence horizontale pour information seulement
  12              	.equ HLINE, 1015 ; PR2= période ligne horizontale
  13              	.equ HSYNC, 74  ; OC1R=47e-6*FCY-1 sync pulse horizontal
  14              	.equ HALFLINE, 507 ; période demi-ligne horizontale (VSYNC)
  15              	.equ SERATION, (HSYNC/2) ;durée pulse dans VSYNC
  16              	.equ TOPLINE, 40  ; première ligne visible
  17              	
MPLAB XC16 ASSEMBLY Listing:  build/default/production/TVout.s 			page 16


  18              	
  19              	
  20              	
  21              	
   9              	.include "video.inc"
   1              	; constantes liées au générateur vidéo
   2              	    
   3              	.equ CHAR_WIDTH,  (8)
   4              	.equ CHAR_HEIGHT, (8)
   5              	.equ FONT_SIZE, (101)
   6              	.equ CPL, (40)  ; caractères pa ligne
   7              	.equ LPS, (25)  ; ligne par écran
   8              	
  10              	
  11              	    
  12              	.equ ELPFRM,  271  ; nombre de lignes par frame pair
  13              	.equ OLPFRM,  272  ; nombre de lignes par frame impair
  14              	.equ VIDEO,  8*ROW  ; nombre de lignes vidéo
  15              	
  16              	
  17              	
  18              	.data
  19                 	.global _T2counter
  20 0000 00 00       	_T2counter: .space 2   ; compte les interruptions T2
  21 0002 FF FF       	line_count: .word 0xffff
  22 0004 FF          	even: .byte 0xff
  23                 	
  24                 	.global _video_buffer
  25 0005 00 00 00 00 	_video_buffer: .space TV_BUFFER
  25      00 00 00 00 
  25      00 00 00 00 
  25      00 00 00 00 
  25      00 00 00 00 
  25      00 00 00 00 
  25      00 00 00 00 
  25      00 00 00 00 
  25      00 00 00 00 
  26                 	
  27                 	
  28 03ed 00          	.text
  29              	
  30              	;********************
  31              	; interruption TIMER2
  32              	;********************
  33              	.global __T2Interrupt
  34              	__T2Interrupt:
  35 000000  80 1F 78 	    push W0
  36 000002  00 20 EC 	    inc _T2counter
  37 000004  02 20 EC 	    inc line_count
  38 000006  00 00 32 	    bra z, 1f
  39 000008  60 00 20 	    mov #6, W0
  40 00000a  02 00 E3 	    cp line_count
  41 00000c  00 00 32 	    bra z, 2f
  42 00000e  C0 00 20 	    mov #12, W0
  43 000010  02 00 E3 	    cp line_count
  44 000012  00 00 32 	    bra z, 3f
  45 000014  20 01 20 	    mov #18, W0
MPLAB XC16 ASSEMBLY Listing:  build/default/production/TVout.s 			page 17


  46 000016  02 00 E3 	    cp line_count
  47 000018  00 00 32 	    bra z, 4f
  48 00001a  80 02 20 	    mov #TOPLINE, W0
  49 00001c  02 00 E3 	    cp line_count
  50 00001e  00 00 32 	    bra z, 5f
  51 000020  00 0F 20 	    mov #TOPLINE+VIDEO, W0
  52 000022  02 00 E3 	    cp line_count
  53 000024  00 00 32 	    bra z, 6f
  54 000026  F0 10 20 	    mov #ELPFRM, W0
  55 000028  02 00 E3 	    cp line_count
  56 00002a  00 00 32 	    bra z, 7f
  57 00002c  00 11 20 	    mov #OLPFRM, W0
  58 00002e  02 00 E3 	    cp line_count
  59 000030  00 00 32 	    bra z, 8f
  60              	0:
  61 000032  00 E0 A9 	    bclr SYNC_IFS, #SYNC_IF
  62 000034  4F 00 78 	    pop W0
  63 000036  00 40 06 	    retfie
  64              	1: ; line_count==0 start VSYNC 6 half line narrow neg. pulses
  65 000038  50 02 20 	    mov #SERATION, W0
  66 00003a  00 00 88 	    mov W0, SYNC_OCR
  67 00003c  B0 1F 20 	    mov #HALFLINE, W0
  68 00003e  00 00 88 	    mov W0, SYNC_OCRS
  69 000040  00 00 88 	    mov W0, SYNC_PER
  70 000042  00 00 37 	    bra 0b
  71              	2: ; line_count==6 , 6 half line large neg. pulses
  72 000044  60 1D 20 	    mov #(HALFLINE-SERATION), W0
  73 000046  00 00 88 	    mov W0, SYNC_OCR
  74 000048  00 00 37 	    bra 0b
  75              	3: ; line_count==12 , 6 half line narrow neg. pulses
  76 00004a  50 02 20 	    mov #SERATION, W0
  77 00004c  00 00 88 	    mov W0, SYNC_OCR
  78 00004e  00 00 37 	    bra 0b
  79              	4: ; line_count==18 , end of VSYNC
  80 000050  A0 04 20 	    mov #HSYNC, W0
  81 000052  00 00 88 	    mov W0, SYNC_OCR
  82 000054  70 3F 20 	    mov #HLINE, W0
  83 000056  00 00 88 	    mov W0, SYNC_OCRS
  84 000058  00 00 88 	    mov W0, SYNC_PER
  85 00005a  00 00 37 	    bra 0b
  86              	5: ; line_count==TOPLINE  activation interruption video
  87 00005c  00 C0 A9 	    bclr VIDEO_IFS, #VIDEO_IF
  88 00005e  00 C0 A8 	    bset VIDEO_IEC, #VIDEO_IE
  89 000060  00 00 37 	    bra 0b
  90              	6: ; line_count==TOPLINE+VIDEDO désactivaion int. video
  91 000062  00 C0 A9 	    bclr VIDEO_IEC, #VIDEO_IE
  92 000064  00 00 37 	    bra 0b
  93              	7: ; line_count==ELPFRM
  94 000066  00 00 EB 	    clr W0
  95 000068  04 40 E3 	    cp.b even
  96 00006a  00 00 32 	    bra z, 0b
  97 00006c  02 A0 EF 	    setm line_count
  98 00006e  04 60 EF 	    clr.b even
  99 000070  00 00 37 	    bra 0b
 100              	8: ;line_count==OLPFRM
 101 000072  02 A0 EF 	    setm line_count
 102 000074  04 E0 EF 	    setm.b even
MPLAB XC16 ASSEMBLY Listing:  build/default/production/TVout.s 			page 18


 103 000076  00 00 37 	    bra 0b
 104              	
 105              	    
 106              	;*********************
 107              	; interruption OC2
 108              	;*********************
 109              	.extern _font
 110              	.equ CH_ROW, W5    
 111              	.equ pVIDBUF, W4
 112              	.equ pFONT, W3
 113              	.equ CH_COUNT, W2    
 114              	.global __OC2Interrupt
 115              	__OC2Interrupt:
 116 000078  80 1F 78 	    push W0
 117 00007a  81 1F 78 	    push W1
 118 00007c  82 1F 78 	    push CH_COUNT
 119 00007e  83 1F 78 	    push pFONT
 120 000080  84 1F 78 	    push pVIDBUF
 121 000082  85 1F 78 	    push CH_ROW
 122 000084  00 00 F8 	    push PSVPAG
 123              	;    mov SYNC_TMR, W0
 124              	;    and #3, W0
 125              	;    sl W0,#1,W0
 126              	;    bra W0
 127              	;    nop
 128              	;    nop
 129              	;    nop
 130              	;    nop
 131              	;    nop
 132              	;    nop
 133              	;    nop
 134              	;    nop
 135 000086  00 00 20 	    mov #psvpage(_font),W0
 136 000088  00 00 88 	    mov W0, PSVPAG
 137 00008a  01 00 80 	    mov line_count, W1
 138 00008c  81 02 B1 	    sub #TOPLINE, W1
 139 00008e  E7 82 60 	    and  W1,#7,CH_ROW
 140 000090  C3 08 DE 	    lsr W1,#3,W1
 141 000092  82 02 20 	    mov #CPL, CH_COUNT
 142 000094  00 10 B8 	    mul.uu CH_COUNT,W0, W0
 143 000096  04 00 20 	    mov #_video_buffer, pVIDBUF
 144 000098  04 02 40 	    add W0, pVIDBUF, pVIDBUF
 145              	 1:
 146 00009a  03 00 20 	    mov #psvoffset(_font), pFONT
 147 00009c  34 40 78 	    mov.b [pVIDBUF++], W0
 148 00009e  00 80 FB 	    ze W0,W0
 149 0000a0  43 00 DD 	    sl W0, #3, W0
 150 0000a2  80 81 41 	    add pFONT,W0,pFONT
 151 0000a4  85 81 41 	    add pFONT,CH_ROW, pFONT
 152 0000a6  93 40 78 	    mov.b [pFONT],W1
 153 0000a8  81 80 FB 	    ze W1, W1
 154              	2:
 155 0000aa  00 20 AB 	    btst VIDEO_SPISTAT, #SPITBF
 156 0000ac  00 00 3A 	    bra nz, 2b
 157 0000ae  01 00 88 	    mov W1, VIDEO_SPIBUF
 158 0000b0  02 01 E9 	    dec CH_COUNT, CH_COUNT
 159 0000b2  00 00 3A 	    bra nz, 1b 
MPLAB XC16 ASSEMBLY Listing:  build/default/production/TVout.s 			page 19


 160              	3:
 161 0000b4  00 20 AB 	    btst VIDEO_SPISTAT, #SPITBF
 162 0000b6  00 00 3A 	    bra nz, 3b
 163 0000b8  00 20 EF 	    clr VIDEO_SPIBUF
 164 0000ba  00 00 F9 	    pop PSVPAG
 165 0000bc  CF 02 78 	    pop CH_ROW
 166 0000be  4F 02 78 	    pop pVIDBUF
 167 0000c0  CF 01 78 	    pop pFONT
 168 0000c2  4F 01 78 	    pop CH_COUNT
 169 0000c4  CF 00 78 	    pop W1
 170 0000c6  4F 00 78 	    pop W0
 171 0000c8  00 C0 A9 	    bclr VIDEO_IFS, #VIDEO_IF
 172 0000ca  00 40 06 	    retfie
 173              	
 174              	    
 175              	.end
