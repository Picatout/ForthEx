MPLAB XC16 ASSEMBLY Listing:  hardware.s 			page 1


   1              	; hardware setup
   2              	    
   3              	.include "hardware.inc"
   1              	.include "p24Fxxxx.inc"
   1              	.ifdef __24F04KA200
   2              	.include "p24F04KA200.inc"
   3              	.equ VALID_ID,1
   4              	.endif
   5              	
   6              	.ifdef __24F04KA201
   7              	.include "p24F04KA201.inc"
   8              	.equ VALID_ID,1
   9              	.endif
  10              	
  11              	.ifdef __24F04KL100
  12              	.include "p24F04KL100.inc"
  13              	.equ VALID_ID,1
  14              	.endif
  15              	
  16              	.ifdef __24F04KL101
  17              	.include "p24F04KL101.inc"
  18              	.equ VALID_ID,1
  19              	.endif
  20              	
  21              	.ifdef __24F08KA101
  22              	.include "p24F08KA101.inc"
  23              	.equ VALID_ID,1
  24              	.endif
  25              	
  26              	.ifdef __24F08KA102
  27              	.include "p24F08KA102.inc"
  28              	.equ VALID_ID,1
  29              	.endif
  30              	
  31              	.ifdef __24F08KL200
  32              	.include "p24F08KL200.inc"
  33              	.equ VALID_ID,1
  34              	.endif
  35              	
  36              	.ifdef __24F08KL201
  37              	.include "p24F08KL201.inc"
  38              	.equ VALID_ID,1
  39              	.endif
  40              	
  41              	.ifdef __24F08KL301
  42              	.include "p24F08KL301.inc"
  43              	.equ VALID_ID,1
  44              	.endif
  45              	
  46              	.ifdef __24F08KL302
  47              	.include "p24F08KL302.inc"
  48              	.equ VALID_ID,1
  49              	.endif
  50              	
  51              	.ifdef __24F08KL401
  52              	.include "p24F08KL401.inc"
  53              	.equ VALID_ID,1
MPLAB XC16 ASSEMBLY Listing:  hardware.s 			page 2


  54              	.endif
  55              	
  56              	.ifdef __24F08KL402
  57              	.include "p24F08KL402.inc"
  58              	.equ VALID_ID,1
  59              	.endif
  60              	
  61              	.ifdef __24F08KM101
  62              	.include "p24F08KM101.inc"
  63              	.equ VALID_ID,1
  64              	.endif
  65              	
  66              	.ifdef __24F08KM102
  67              	.include "p24F08KM102.inc"
  68              	.equ VALID_ID,1
  69              	.endif
  70              	
  71              	.ifdef __24F08KM202
  72              	.include "p24F08KM202.inc"
  73              	.equ VALID_ID,1
  74              	.endif
  75              	
  76              	.ifdef __24F08KM204
  77              	.include "p24F08KM204.inc"
  78              	.equ VALID_ID,1
  79              	.endif
  80              	
  81              	.ifdef __24F16KA101
  82              	.include "p24F16KA101.inc"
  83              	.equ VALID_ID,1
  84              	.endif
  85              	
  86              	.ifdef __24F16KA102
  87              	.include "p24F16KA102.inc"
  88              	.equ VALID_ID,1
  89              	.endif
  90              	
  91              	.ifdef __24F16KA301
  92              	.include "p24F16KA301.inc"
  93              	.equ VALID_ID,1
  94              	.endif
  95              	
  96              	.ifdef __24F16KA302
  97              	.include "p24F16KA302.inc"
  98              	.equ VALID_ID,1
  99              	.endif
 100              	
 101              	.ifdef __24F16KA304
 102              	.include "p24F16KA304.inc"
 103              	.equ VALID_ID,1
 104              	.endif
 105              	
 106              	.ifdef __24F16KL401
 107              	.include "p24F16KL401.inc"
 108              	.equ VALID_ID,1
 109              	.endif
 110              	
MPLAB XC16 ASSEMBLY Listing:  hardware.s 			page 3


 111              	.ifdef __24F16KL402
 112              	.include "p24F16KL402.inc"
 113              	.equ VALID_ID,1
 114              	.endif
 115              	
 116              	.ifdef __24F16KM102
 117              	.include "p24F16KM102.inc"
 118              	.equ VALID_ID,1
 119              	.endif
 120              	
 121              	.ifdef __24F16KM104
 122              	.include "p24F16KM104.inc"
 123              	.equ VALID_ID,1
 124              	.endif
 125              	
 126              	.ifdef __24F16KM202
 127              	.include "p24F16KM202.inc"
 128              	.equ VALID_ID,1
 129              	.endif
 130              	
 131              	.ifdef __24F16KM204
 132              	.include "p24F16KM204.inc"
 133              	.equ VALID_ID,1
 134              	.endif
 135              	
 136              	.ifdef __24F32KA301
 137              	.include "p24F32KA301.inc"
 138              	.equ VALID_ID,1
 139              	.endif
 140              	
 141              	.ifdef __24F32KA302
 142              	.include "p24F32KA302.inc"
 143              	.equ VALID_ID,1
 144              	.endif
 145              	
 146              	.ifdef __24F32KA304
 147              	.include "p24F32KA304.inc"
 148              	.equ VALID_ID,1
 149              	.endif
 150              	
 151              	.ifdef __24FJ1024GA606
 152              	.include "p24FJ1024GA606.inc"
 153              	.equ VALID_ID,1
 154              	.endif
 155              	
 156              	.ifdef __24FJ1024GA610
 157              	.include "p24FJ1024GA610.inc"
 158              	.equ VALID_ID,1
 159              	.endif
 160              	
 161              	.ifdef __24FJ1024GB606
 162              	.include "p24FJ1024GB606.inc"
 163              	.equ VALID_ID,1
 164              	.endif
 165              	
 166              	.ifdef __24FJ1024GB610
 167              	.include "p24FJ1024GB610.inc"
MPLAB XC16 ASSEMBLY Listing:  hardware.s 			page 4


 168              	.equ VALID_ID,1
 169              	.endif
 170              	
 171              	.ifdef __24FJ128DA106
 172              	.include "p24FJ128DA106.inc"
 173              	.equ VALID_ID,1
 174              	.endif
 175              	
 176              	.ifdef __24FJ128DA110
 177              	.include "p24FJ128DA110.inc"
 178              	.equ VALID_ID,1
 179              	.endif
 180              	
 181              	.ifdef __24FJ128DA206
 182              	.include "p24FJ128DA206.inc"
 183              	.equ VALID_ID,1
 184              	.endif
 185              	
 186              	.ifdef __24FJ128DA210
 187              	.include "p24FJ128DA210.inc"
 188              	.equ VALID_ID,1
 189              	.endif
 190              	
 191              	.ifdef __24FJ128GA006
 192              	.include "p24FJ128GA006.inc"
 193              	.equ VALID_ID,1
 194              	.endif
 195              	
 196              	.ifdef __24FJ128GA008
 197              	.include "p24FJ128GA008.inc"
 198              	.equ VALID_ID,1
 199              	.endif
 200              	
 201              	.ifdef __24FJ128GA010
 202              	.include "p24FJ128GA010.inc"
 203              	.equ VALID_ID,1
 204              	.endif
 205              	
 206              	.ifdef __24FJ128GA106
 207              	.include "p24FJ128GA106.inc"
 208              	.equ VALID_ID,1
 209              	.endif
 210              	
 211              	.ifdef __24FJ128GA108
 212              	.include "p24FJ128GA108.inc"
 213              	.equ VALID_ID,1
 214              	.endif
 215              	
 216              	.ifdef __24FJ128GA110
 217              	.include "p24FJ128GA110.inc"
 218              	.equ VALID_ID,1
 219              	.endif
 220              	
 221              	.ifdef __24FJ128GA202
 222              	.include "p24FJ128GA202.inc"
 223              	.equ VALID_ID,1
 224              	.endif
MPLAB XC16 ASSEMBLY Listing:  hardware.s 			page 5


 225              	
 226              	.ifdef __24FJ128GA204
 227              	.include "p24FJ128GA204.inc"
 228              	.equ VALID_ID,1
 229              	.endif
 230              	
 231              	.ifdef __24FJ128GA306
 232              	.include "p24FJ128GA306.inc"
 233              	.equ VALID_ID,1
 234              	.endif
 235              	
 236              	.ifdef __24FJ128GA308
 237              	.include "p24FJ128GA308.inc"
 238              	.equ VALID_ID,1
 239              	.endif
 240              	
 241              	.ifdef __24FJ128GA310
 242              	.include "p24FJ128GA310.inc"
 243              	.equ VALID_ID,1
 244              	.endif
 245              	
 246              	.ifdef __24FJ128GA406
 247              	.include "p24FJ128GA406.inc"
 248              	.equ VALID_ID,1
 249              	.endif
 250              	
 251              	.ifdef __24FJ128GA410
 252              	.include "p24FJ128GA410.inc"
 253              	.equ VALID_ID,1
 254              	.endif
 255              	
 256              	.ifdef __24FJ128GA412
 257              	.include "p24FJ128GA412.inc"
 258              	.equ VALID_ID,1
 259              	.endif
 260              	
 261              	.ifdef __24FJ128GA606
 262              	.include "p24FJ128GA606.inc"
 263              	.equ VALID_ID,1
 264              	.endif
 265              	
 266              	.ifdef __24FJ128GA610
 267              	.include "p24FJ128GA610.inc"
 268              	.equ VALID_ID,1
 269              	.endif
 270              	
 271              	.ifdef __24FJ128GB106
 272              	.include "p24FJ128GB106.inc"
 273              	.equ VALID_ID,1
 274              	.endif
 275              	
 276              	.ifdef __24FJ128GB108
 277              	.include "p24FJ128GB108.inc"
 278              	.equ VALID_ID,1
 279              	.endif
 280              	
 281              	.ifdef __24FJ128GB110
MPLAB XC16 ASSEMBLY Listing:  hardware.s 			page 6


 282              	.include "p24FJ128GB110.inc"
 283              	.equ VALID_ID,1
 284              	.endif
 285              	
 286              	.ifdef __24FJ128GB202
 287              	.include "p24FJ128GB202.inc"
 288              	.equ VALID_ID,1
 289              	.endif
 290              	
 291              	.ifdef __24FJ128GB204
 292              	.include "p24FJ128GB204.inc"
 293              	.equ VALID_ID,1
 294              	.endif
 295              	
 296              	.ifdef __24FJ128GB206
 297              	.include "p24FJ128GB206.inc"
 298              	.equ VALID_ID,1
 299              	.endif
 300              	
 301              	.ifdef __24FJ128GB210
 302              	.include "p24FJ128GB210.inc"
 303              	.equ VALID_ID,1
 304              	.endif
 305              	
 306              	.ifdef __24FJ128GB406
 307              	.include "p24FJ128GB406.inc"
 308              	.equ VALID_ID,1
 309              	.endif
 310              	
 311              	.ifdef __24FJ128GB410
 312              	.include "p24FJ128GB410.inc"
 313              	.equ VALID_ID,1
 314              	.endif
 315              	
 316              	.ifdef __24FJ128GB412
 317              	.include "p24FJ128GB412.inc"
 318              	.equ VALID_ID,1
 319              	.endif
 320              	
 321              	.ifdef __24FJ128GB606
 322              	.include "p24FJ128GB606.inc"
 323              	.equ VALID_ID,1
 324              	.endif
 325              	
 326              	.ifdef __24FJ128GB610
 327              	.include "p24FJ128GB610.inc"
 328              	.equ VALID_ID,1
 329              	.endif
 330              	
 331              	.ifdef __24FJ128GC006
 332              	.include "p24FJ128GC006.inc"
 333              	.equ VALID_ID,1
 334              	.endif
 335              	
 336              	.ifdef __24FJ128GC010
 337              	.include "p24FJ128GC010.inc"
 338              	.equ VALID_ID,1
MPLAB XC16 ASSEMBLY Listing:  hardware.s 			page 7


 339              	.endif
 340              	
 341              	.ifdef __24FJ16GA002
 342              	.include "p24FJ16GA002.inc"
 343              	.equ VALID_ID,1
 344              	.endif
 345              	
 346              	.ifdef __24FJ16GA004
 347              	.include "p24FJ16GA004.inc"
 348              	.equ VALID_ID,1
 349              	.endif
 350              	
 351              	.ifdef __24FJ16MC101
 352              	.include "p24FJ16MC101.inc"
 353              	.equ VALID_ID,1
 354              	.endif
 355              	
 356              	.ifdef __24FJ16MC102
 357              	.include "p24FJ16MC102.inc"
 358              	.equ VALID_ID,1
 359              	.endif
 360              	
 361              	.ifdef __24FJ192GA106
 362              	.include "p24FJ192GA106.inc"
 363              	.equ VALID_ID,1
 364              	.endif
 365              	
 366              	.ifdef __24FJ192GA108
 367              	.include "p24FJ192GA108.inc"
 368              	.equ VALID_ID,1
 369              	.endif
 370              	
 371              	.ifdef __24FJ192GA110
 372              	.include "p24FJ192GA110.inc"
 373              	.equ VALID_ID,1
 374              	.endif
 375              	
 376              	.ifdef __24FJ192GB106
 377              	.include "p24FJ192GB106.inc"
 378              	.equ VALID_ID,1
 379              	.endif
 380              	
 381              	.ifdef __24FJ192GB108
 382              	.include "p24FJ192GB108.inc"
 383              	.equ VALID_ID,1
 384              	.endif
 385              	
 386              	.ifdef __24FJ192GB110
 387              	.include "p24FJ192GB110.inc"
 388              	.equ VALID_ID,1
 389              	.endif
 390              	
 391              	.ifdef __24FJ256DA106
 392              	.include "p24FJ256DA106.inc"
 393              	.equ VALID_ID,1
 394              	.endif
 395              	
MPLAB XC16 ASSEMBLY Listing:  hardware.s 			page 8


 396              	.ifdef __24FJ256DA110
 397              	.include "p24FJ256DA110.inc"
 398              	.equ VALID_ID,1
 399              	.endif
 400              	
 401              	.ifdef __24FJ256DA206
 402              	.include "p24FJ256DA206.inc"
 403              	.equ VALID_ID,1
 404              	.endif
 405              	
 406              	.ifdef __24FJ256DA210
 407              	.include "p24FJ256DA210.inc"
 408              	.equ VALID_ID,1
 409              	.endif
 410              	
 411              	.ifdef __24FJ256GA106
 412              	.include "p24FJ256GA106.inc"
 413              	.equ VALID_ID,1
 414              	.endif
 415              	
 416              	.ifdef __24FJ256GA108
 417              	.include "p24FJ256GA108.inc"
 418              	.equ VALID_ID,1
 419              	.endif
 420              	
 421              	.ifdef __24FJ256GA110
 422              	.include "p24FJ256GA110.inc"
 423              	.equ VALID_ID,1
 424              	.endif
 425              	
 426              	.ifdef __24FJ256GA406
 427              	.include "p24FJ256GA406.inc"
 428              	.equ VALID_ID,1
 429              	.endif
 430              	
 431              	.ifdef __24FJ256GA410
 432              	.include "p24FJ256GA410.inc"
 433              	.equ VALID_ID,1
 434              	.endif
 435              	
 436              	.ifdef __24FJ256GA412
 437              	.include "p24FJ256GA412.inc"
 438              	.equ VALID_ID,1
 439              	.endif
 440              	
 441              	.ifdef __24FJ256GA606
 442              	.include "p24FJ256GA606.inc"
 443              	.equ VALID_ID,1
 444              	.endif
 445              	
 446              	.ifdef __24FJ256GA610
 447              	.include "p24FJ256GA610.inc"
 448              	.equ VALID_ID,1
 449              	.endif
 450              	
 451              	.ifdef __24FJ256GB106
 452              	.include "p24FJ256GB106.inc"
MPLAB XC16 ASSEMBLY Listing:  hardware.s 			page 9


 453              	.equ VALID_ID,1
 454              	.endif
 455              	
 456              	.ifdef __24FJ256GB108
 457              	.include "p24FJ256GB108.inc"
 458              	.equ VALID_ID,1
 459              	.endif
 460              	
 461              	.ifdef __24FJ256GB110
 462              	.include "p24FJ256GB110.inc"
 463              	.equ VALID_ID,1
 464              	.endif
 465              	
 466              	.ifdef __24FJ256GB206
 467              	.include "p24FJ256GB206.inc"
 468              	.equ VALID_ID,1
 469              	.endif
 470              	
 471              	.ifdef __24FJ256GB210
 472              	.include "p24FJ256GB210.inc"
 473              	.equ VALID_ID,1
 474              	.endif
 475              	
 476              	.ifdef __24FJ256GB406
 477              	.include "p24FJ256GB406.inc"
 478              	.equ VALID_ID,1
 479              	.endif
 480              	
 481              	.ifdef __24FJ256GB410
 482              	.include "p24FJ256GB410.inc"
 483              	.equ VALID_ID,1
 484              	.endif
 485              	
 486              	.ifdef __24FJ256GB412
 487              	.include "p24FJ256GB412.inc"
 488              	.equ VALID_ID,1
 489              	.endif
 490              	
 491              	.ifdef __24FJ256GB606
 492              	.include "p24FJ256GB606.inc"
 493              	.equ VALID_ID,1
 494              	.endif
 495              	
 496              	.ifdef __24FJ256GB610
 497              	.include "p24FJ256GB610.inc"
 498              	.equ VALID_ID,1
 499              	.endif
 500              	
 501              	.ifdef __24FJ32GA002
 502              	.include "p24FJ32GA002.inc"
 503              	.equ VALID_ID,1
 504              	.endif
 505              	
 506              	.ifdef __24FJ32GA004
 507              	.include "p24FJ32GA004.inc"
 508              	.equ VALID_ID,1
 509              	.endif
MPLAB XC16 ASSEMBLY Listing:  hardware.s 			page 10


 510              	
 511              	.ifdef __24FJ32GA102
 512              	.include "p24FJ32GA102.inc"
 513              	.equ VALID_ID,1
 514              	.endif
 515              	
 516              	.ifdef __24FJ32GA104
 517              	.include "p24FJ32GA104.inc"
 518              	.equ VALID_ID,1
 519              	.endif
 520              	
 521              	.ifdef __24FJ32GB002
 522              	.include "p24FJ32GB002.inc"
 523              	.equ VALID_ID,1
 524              	.endif
 525              	
 526              	.ifdef __24FJ32GB004
 527              	.include "p24FJ32GB004.inc"
 528              	.equ VALID_ID,1
 529              	.endif
 530              	
 531              	.ifdef __24FJ32MC101
 532              	.include "p24FJ32MC101.inc"
 533              	.equ VALID_ID,1
 534              	.endif
 535              	
 536              	.ifdef __24FJ32MC102
 537              	.include "p24FJ32MC102.inc"
 538              	.equ VALID_ID,1
 539              	.endif
 540              	
 541              	.ifdef __24FJ32MC104
 542              	.include "p24FJ32MC104.inc"
 543              	.equ VALID_ID,1
 544              	.endif
 545              	
 546              	.ifdef __24FJ48GA002
 547              	.include "p24FJ48GA002.inc"
 548              	.equ VALID_ID,1
 549              	.endif
 550              	
 551              	.ifdef __24FJ48GA004
 552              	.include "p24FJ48GA004.inc"
 553              	.equ VALID_ID,1
 554              	.endif
 555              	
 556              	.ifdef __24FJ512GA606
 557              	.include "p24FJ512GA606.inc"
 558              	.equ VALID_ID,1
 559              	.endif
 560              	
 561              	.ifdef __24FJ512GA610
 562              	.include "p24FJ512GA610.inc"
 563              	.equ VALID_ID,1
 564              	.endif
 565              	
 566              	.ifdef __24FJ512GB606
MPLAB XC16 ASSEMBLY Listing:  hardware.s 			page 11


 567              	.include "p24FJ512GB606.inc"
 568              	.equ VALID_ID,1
 569              	.endif
 570              	
 571              	.ifdef __24FJ512GB610
 572              	.include "p24FJ512GB610.inc"
 573              	.equ VALID_ID,1
 574              	.endif
 575              	
 576              	.ifdef __24FJ64GA002
 577              	.include "p24FJ64GA002.inc"
   1              	;==========================================================================
   2              	;  PIC24FJ64GA002 Standard Assembly Include File
   3              	; 
   4              	;  (c) Copyright 2014 Microchip Technology, All rights reserved
   5              	;  Part support version v1.23.A(26-Sep-2014)
   6              	;==========================================================================
   7              	
 2675              	.LIST
 578              	.equ VALID_ID,1
 579              	.endif
 580              	
 581              	.ifdef __24FJ64GA004
 582              	.include "p24FJ64GA004.inc"
 583              	.equ VALID_ID,1
 584              	.endif
 585              	
 586              	.ifdef __24FJ64GA006
 587              	.include "p24FJ64GA006.inc"
 588              	.equ VALID_ID,1
 589              	.endif
 590              	
 591              	.ifdef __24FJ64GA008
 592              	.include "p24FJ64GA008.inc"
 593              	.equ VALID_ID,1
 594              	.endif
 595              	
 596              	.ifdef __24FJ64GA010
 597              	.include "p24FJ64GA010.inc"
 598              	.equ VALID_ID,1
 599              	.endif
 600              	
 601              	.ifdef __24FJ64GA102
 602              	.include "p24FJ64GA102.inc"
 603              	.equ VALID_ID,1
 604              	.endif
 605              	
 606              	.ifdef __24FJ64GA104
 607              	.include "p24FJ64GA104.inc"
 608              	.equ VALID_ID,1
 609              	.endif
 610              	
 611              	.ifdef __24FJ64GA106
 612              	.include "p24FJ64GA106.inc"
 613              	.equ VALID_ID,1
 614              	.endif
 615              	
MPLAB XC16 ASSEMBLY Listing:  hardware.s 			page 12


 616              	.ifdef __24FJ64GA108
 617              	.include "p24FJ64GA108.inc"
 618              	.equ VALID_ID,1
 619              	.endif
 620              	
 621              	.ifdef __24FJ64GA110
 622              	.include "p24FJ64GA110.inc"
 623              	.equ VALID_ID,1
 624              	.endif
 625              	
 626              	.ifdef __24FJ64GA202
 627              	.include "p24FJ64GA202.inc"
 628              	.equ VALID_ID,1
 629              	.endif
 630              	
 631              	.ifdef __24FJ64GA204
 632              	.include "p24FJ64GA204.inc"
 633              	.equ VALID_ID,1
 634              	.endif
 635              	
 636              	.ifdef __24FJ64GA306
 637              	.include "p24FJ64GA306.inc"
 638              	.equ VALID_ID,1
 639              	.endif
 640              	
 641              	.ifdef __24FJ64GA308
 642              	.include "p24FJ64GA308.inc"
 643              	.equ VALID_ID,1
 644              	.endif
 645              	
 646              	.ifdef __24FJ64GA310
 647              	.include "p24FJ64GA310.inc"
 648              	.equ VALID_ID,1
 649              	.endif
 650              	
 651              	.ifdef __24FJ64GA406
 652              	.include "p24FJ64GA406.inc"
 653              	.equ VALID_ID,1
 654              	.endif
 655              	
 656              	.ifdef __24FJ64GA410
 657              	.include "p24FJ64GA410.inc"
 658              	.equ VALID_ID,1
 659              	.endif
 660              	
 661              	.ifdef __24FJ64GA412
 662              	.include "p24FJ64GA412.inc"
 663              	.equ VALID_ID,1
 664              	.endif
 665              	
 666              	.ifdef __24FJ64GB002
 667              	.include "p24FJ64GB002.inc"
 668              	.equ VALID_ID,1
 669              	.endif
 670              	
 671              	.ifdef __24FJ64GB004
 672              	.include "p24FJ64GB004.inc"
MPLAB XC16 ASSEMBLY Listing:  hardware.s 			page 13


 673              	.equ VALID_ID,1
 674              	.endif
 675              	
 676              	.ifdef __24FJ64GB106
 677              	.include "p24FJ64GB106.inc"
 678              	.equ VALID_ID,1
 679              	.endif
 680              	
 681              	.ifdef __24FJ64GB108
 682              	.include "p24FJ64GB108.inc"
 683              	.equ VALID_ID,1
 684              	.endif
 685              	
 686              	.ifdef __24FJ64GB110
 687              	.include "p24FJ64GB110.inc"
 688              	.equ VALID_ID,1
 689              	.endif
 690              	
 691              	.ifdef __24FJ64GB202
 692              	.include "p24FJ64GB202.inc"
 693              	.equ VALID_ID,1
 694              	.endif
 695              	
 696              	.ifdef __24FJ64GB204
 697              	.include "p24FJ64GB204.inc"
 698              	.equ VALID_ID,1
 699              	.endif
 700              	
 701              	.ifdef __24FJ64GB406
 702              	.include "p24FJ64GB406.inc"
 703              	.equ VALID_ID,1
 704              	.endif
 705              	
 706              	.ifdef __24FJ64GB410
 707              	.include "p24FJ64GB410.inc"
 708              	.equ VALID_ID,1
 709              	.endif
 710              	
 711              	.ifdef __24FJ64GB412
 712              	.include "p24FJ64GB412.inc"
 713              	.equ VALID_ID,1
 714              	.endif
 715              	
 716              	.ifdef __24FJ64GC006
 717              	.include "p24FJ64GC006.inc"
 718              	.equ VALID_ID,1
 719              	.endif
 720              	
 721              	.ifdef __24FJ64GC010
 722              	.include "p24FJ64GC010.inc"
 723              	.equ VALID_ID,1
 724              	.endif
 725              	
 726              	.ifdef __24FJ96GA006
 727              	.include "p24FJ96GA006.inc"
 728              	.equ VALID_ID,1
 729              	.endif
MPLAB XC16 ASSEMBLY Listing:  hardware.s 			page 14


 730              	
 731              	.ifdef __24FJ96GA008
 732              	.include "p24FJ96GA008.inc"
 733              	.equ VALID_ID,1
 734              	.endif
 735              	
 736              	.ifdef __24FJ96GA010
 737              	.include "p24FJ96GA010.inc"
 738              	.equ VALID_ID,1
 739              	.endif
 740              	
 741              	.ifdef __24FV08KM101
 742              	.include "p24FV08KM101.inc"
 743              	.equ VALID_ID,1
 744              	.endif
 745              	
 746              	.ifdef __24FV08KM102
 747              	.include "p24FV08KM102.inc"
 748              	.equ VALID_ID,1
 749              	.endif
 750              	
 751              	.ifdef __24FV08KM202
 752              	.include "p24FV08KM202.inc"
 753              	.equ VALID_ID,1
 754              	.endif
 755              	
 756              	.ifdef __24FV08KM204
 757              	.include "p24FV08KM204.inc"
 758              	.equ VALID_ID,1
 759              	.endif
 760              	
 761              	.ifdef __24FV16KA301
 762              	.include "p24FV16KA301.inc"
 763              	.equ VALID_ID,1
 764              	.endif
 765              	
 766              	.ifdef __24FV16KA302
 767              	.include "p24FV16KA302.inc"
 768              	.equ VALID_ID,1
 769              	.endif
 770              	
 771              	.ifdef __24FV16KA304
 772              	.include "p24FV16KA304.inc"
 773              	.equ VALID_ID,1
 774              	.endif
 775              	
 776              	.ifdef __24FV16KM102
 777              	.include "p24FV16KM102.inc"
 778              	.equ VALID_ID,1
 779              	.endif
 780              	
 781              	.ifdef __24FV16KM104
 782              	.include "p24FV16KM104.inc"
 783              	.equ VALID_ID,1
 784              	.endif
 785              	
 786              	.ifdef __24FV16KM202
MPLAB XC16 ASSEMBLY Listing:  hardware.s 			page 15


 787              	.include "p24FV16KM202.inc"
 788              	.equ VALID_ID,1
 789              	.endif
 790              	
 791              	.ifdef __24FV16KM204
 792              	.include "p24FV16KM204.inc"
 793              	.equ VALID_ID,1
 794              	.endif
 795              	
 796              	.ifdef __24FV32KA301
 797              	.include "p24FV32KA301.inc"
 798              	.equ VALID_ID,1
 799              	.endif
 800              	
 801              	.ifdef __24FV32KA302
 802              	.include "p24FV32KA302.inc"
 803              	.equ VALID_ID,1
 804              	.endif
 805              	
 806              	.ifdef __24FV32KA304
 807              	.include "p24FV32KA304.inc"
 808              	.equ VALID_ID,1
 809              	.endif
 810              	
 811              	.ifndef VALID_ID
 812              	.error "processor ID not specified in generic include file"
 813              	.endif
   2              	
  61              	.LIST
  62              	
  63              	
   4              	.include "ntsc_const.inc"    
   1              	
   2              	;résolution d'image
   3              	.equ XRES, 320
   4              	.equ YRES, 200
   5              	.equ BPL, (XRES/8)
   6              	.equ ROW, (YRES/8)
   7              	.equ TV_BUFFER, (ROW*BPL)
   8              	
   9              	
  10              	; constantes génération signal NTSC
  11              	.equ HFREQ, 15748 ; fréquence horizontale pour information seulement
  12              	.equ HLINE, 1015 ; PR2= période ligne horizontale
  13              	.equ HSYNC, 74  ; OC1R=47e-6*FCY-1 sync pulse horizontal
  14              	.equ HALFLINE, 507 ; période demi-ligne horizontale (VSYNC)
  15              	.equ SERATION, (HSYNC/2) ;durée pulse dans VSYNC
  16              	.equ TOPLINE, 40  ; première ligne visible
  17              	
  18              	
  19              	
  20              	
  21              	
   5              	    
   6              	.text
   7              	.global hardware_init
   8              	hardware_init:
MPLAB XC16 ASSEMBLY Listing:  hardware.s 			page 16


   9 000000  00 40 A8 	    bset CORCON, #PSV ; vue de la mémoire programme à l'adresse 0x8000
  10 000002  00 20 EF 	    clr CLKDIV  ; pas de post-div Fcy=Fosc/2
  11 000004  01 00 A8 	    bset OSCCON, #NOSC0
  12 000006  00 E0 A8 	    bset OSCCON, #CLKLOCK ; verrouillage clock
  13 000008  01 E0 A9 	    bclr INTCON1, #NSTDIS; interruption multi-niveaux
  14 00000a  00 A0 EF 	    setm TRISB      ; port tous en entrée
  15 00000c  00 A0 EF 	    setm AD1PCFG    ; désactivation entrées analogiques
  16 00000e  00 00 02 	    call tvout_init
  16         00 00 00 
  17 000012  00 00 02 	    call kbd_init
  17         00 00 00 
  18              	    
  19              	    ; verouillage configuration I/O
  20 000016  00 C0 A8 	    bset OSCCON, #IOLOCK
  21 000018  00 00 06 	    return
  22              	
  23              	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  24              	; initialisation générateur vidéo
  25              	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  26              	tvout_init:
  27 00001a  00 60 A9 	    bclr VIDEO_TRIS, #VIDEO_OUT ; sortie vidéo
  28 00001c  00 80 A9 	    bclr SYNC_TRIS, #SYNC_OUT  ; sortie sync vidéo
  29              	    ; configuration PPS
  30 00001e  00 00 80 	    mov VIDEO_RPOR, W0
  31 000020  F1 0F 2E 	    mov #~(0x1f<<VIDEO_RPORbit),W1
  32 000022  01 00 60 	    and W0,W1,W0
  33 000024  01 A0 20 	    mov #(VIDEO_FN<<VIDEO_RPORbit), W1
  34 000026  01 00 70 	    ior W0,W1,W0
  35 000028  00 00 88 	    mov W0, VIDEO_RPOR
  36 00002a  00 00 80 	    mov SYNC_RPOR, W0
  37 00002c  01 FE 2F 	    mov #~(0x1f<<SYNC_RPORbit),W1
  38 00002e  01 00 60 	    and W0,W1,W0
  39 000030  21 01 20 	    mov #(SYNC_FN<<SYNC_RPORbit), W1
  40 000032  01 00 70 	    ior W0,W1,W0
  41 000034  00 00 88 	    mov W0, SYNC_RPOR
  42              	    ; configuration VIDEO_SPI
  43 000036  B0 03 20 	    mov #(3+(6<<SPRE0)+1<<MSTEN), W0
  44 000038  00 00 88 	    mov W0, VIDEO_SPICON1
  45 00003a  01 E0 A8 	    bset VIDEO_SPISTAT, #SPIEN
  46 00003c  00 20 EF 	    clr VIDEO_SPIBUF
  47              	    ; configuration output compare
  48 00003e  70 3F 20 	    mov #HLINE, W0
  49              	    ; période timer Fcy/15748-1
  50 000040  00 00 88 	    mov W0, SYNC_PER
  51 000042  00 00 88 	    mov W0, SYNC_OCRS
  52 000044  00 00 88 	    mov W0, VIDEO_OCR
  53 000046  A0 04 20 	    mov #HSYNC, W0
  54 000048  00 00 88 	    mov W0, SYNC_OCR
  55 00004a  41 00 DD 	    sl  W0, #1, W0
  56 00004c  00 00 88 	    mov W0, VIDEO_OCRS
  57              	    ; configuraton output compare mode 5
  58 00004e  50 00 20 	    mov #5, W0
  59 000050  00 00 88 	    mov W0, SYNC_OCCON
  60 000052  00 00 88 	    mov W0, VIDEO_OCCON
  61              	    ; configuration priorité d'interruptions
  62              	    ; priorité 5 pour les 2
  63 000054  F0 FF 28 	    mov #~(7<<SYNC_IPbit), W0
MPLAB XC16 ASSEMBLY Listing:  hardware.s 			page 17


  64 000056  00 20 B6 	    and SYNC_IPC
  65 000058  00 00 25 	    mov #(5<<SYNC_IPbit), W0 
  66 00005a  00 20 B7 	    ior SYNC_IPC
  67 00005c  F0 8F 2F 	    mov #~(7<<VIDEO_IPbit), W0
  68 00005e  00 20 B6 	    and VIDEO_IPC
  69 000060  00 50 20 	    mov #(5<<VIDEO_IPbit), W0
  70 000062  00 20 B7 	    ior VIDEO_IPC
  71              	    ; activation interruption  SYNC_TIMER
  72 000064  00 E0 A9 	    bclr SYNC_IFS, #SYNC_IF
  73 000066  00 E0 A8 	    bset SYNC_IEC, #SYNC_IE
  74              	    ; activation vidéo
  75 000068  00 C0 A9 	    bclr VIDEO_IFS, #VIDEO_IF
  76 00006a  00 C0 A8 	    bset VIDEO_IEC, #VIDEO_IE
  77              	    ; activation timer
  78 00006c  01 E0 A8 	    bset SYNC_TMRCON, #TON
  79 00006e  00 00 06 	    return
  80              	
  81              	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  82              	; initialistaion clavier PS/2
  83              	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  84              	kbd_init:
  85              	    ; PPS sélection broche pour kbd_clk
  86 000070  F0 0F 2E 	    mov #~(0x1f<<KBD_PPSbit), W0
  87 000072  00 20 B6 	    and KBD_RPINR
  88 000074  00 F0 20 	    mov #(KBD_CLK<<KBD_PPSbit), W0
  89 000076  00 20 B7 	    ior KBD_RPINR
  90              	    ; priorité d'interruption 7
  91 000078  70 00 20 	    mov #(7<<KBD_IPCbit), W0
  92 00007a  00 20 B7 	    ior KBD_IPCR 
  93              	     ; interruption sur transition négative
  94 00007c  00 20 A8 	    bset INTCON2, #KBD_INTEP
  95              	    ; activation interruption clavier
  96 00007e  00 80 A9 	    bclr KBD_IFS, #KBD_IF
  97 000080  00 80 A8 	    bset KBD_IEC, #KBD_IE
  98 000082  00 00 06 	    return
  99              	    
 100              	.end
