<DOCTYPE! html>
<html lang="fr-CA">
<head>
</head>
<body id="#top">
<h1>sdcard</h1><div><a href="#index">index</a></div>
<div><a href="index.html">index principal</a></div>
<h2 id="description">Description</h2><div style="margin-left:5%;">  
</div>
<div style="margin-left:5%;"> Interface de base pour l'accès à la carte SD en utilisant l'interface SPI de celle-ci.
</div>
<div style="margin-left:5%;"> Permet l'initialisation de la carte ainsi que la lecture et l'écriture d'un bloc de
</div>
<div style="margin-left:5%;"> donnée sur la carte.    
</div>
<div style="margin-left:5%;">REF: <a href=" http://elm-chan.org/docs/mmc/mmc_e.html
"> http://elm-chan.org/docs/mmc/mmc_e.html
</a></div>
<div style="margin-left:5%;">REF: <a href=" http://elm-chan.org/docs/mmc/pic/sdinit.png    
"> http://elm-chan.org/docs/mmc/pic/sdinit.png    
</a></div>
<div style="margin-left:5%;">REF: <a href=" https://www.sdcard.org/downloads/pls/
"> https://www.sdcard.org/downloads/pls/
</a></div>
<div style="margin-left:5%;">  <br>
</div>
<div><a href="index.html">index principal</a></div>
<hr style="border-width:4px;"><p id="SDC-R">
<b>SDC-R</b> ( -- a-addr )
<div style="margin-left:5%;">   Adresse de la mémoire tampon qui reçois la réponse de la carte SD.
</div>
<div style="margin-left:5%;">   Utile seulement pour débogage.    
</div>
</p>
<div style="margin-left:5%;"><b> arguments:
</b></div>
<div style="margin-left:5%;"><i>aucun
</i>&nbsp;&nbsp;</div>
<div style="margin-left:5%;"><b> retourne:
</b></div>
<div style="margin-left:5%;"><i>a-addr</i>&nbsp;&nbsp; Adresse du vecteur réponse carte SD.
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html">index principal</a></div>
<hr style="border-width:1px;"><p id="SDCINIT">
<b>SDCINIT</b> ( -- f )
<div style="margin-left:5%;">   Initialisation carte SD 
</div>
<div style="margin-left:5%;">REF: <a href=" http://elm-chan.org/docs/mmc/pic/sdinit.png    
"> http://elm-chan.org/docs/mmc/pic/sdinit.png    
</a></div>
</p>
<div style="margin-left:5%;"><b> arguments:
</b></div>
<div style="margin-left:5%;"><i>aucun
</i>&nbsp;&nbsp;</div>
<div style="margin-left:5%;"><b> retourne:
</b></div>
<div style="margin-left:5%;"><i>f</i>&nbsp;&nbsp;   Indicateur Booléen, vrai si l'initialisation est réussie.   
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html">index principal</a></div>
<hr style="border-width:1px;"><p id="?SDC">
<b>?SDC</b>  ( -- u )    
<div style="margin-left:5%;">   Retourne un entier non signé contenant les indicateurs booléen suivants
</div>
<div style="margin-left:5%;">  <br><table border="single">    
</div>
<div style="margin-left:5%;">  <tr><th><center>bit</center></th><th>nom</th><th>description</th></tr>    
</div>
<div style="margin-left:5%;">  <tr><td><center>0</center></td><td>F_SDC_IN</td><td>1 &rarr; S'il y a une carte dans la fente.</td></tr>
</div>
<div style="margin-left:5%;">  <tr><td><center>1</center></td><td>F_SDC_OK</td><td>1 &rarr; Si la carte est initialisée.</td></tr>
</div>
<div style="margin-left:5%;">  <tr><td><center>2</center></td><td>F_SDC_V2</td><td>1  &rarr; S'il s'agit d'une carte version 2.</td></tr>
</div>
<div style="margin-left:5%;">  <tr><td><center>3</center></td><td>F_SDC_HC</td><td>1 &rarr; S'il s'agit d'une carte haute capacitée. Adressable par bloc de 512 octets.</td></tr>
</div>
<div style="margin-left:5%;">  <tr><td><center>4</center></td><td>F_SDC_TO</td><td>1 &rarr; Si la dernière commande a expirée avant d'aboutir.</td></tr>
</div>
<div style="margin-left:5%;">  <tr><td><center>5</center></td><td>F_SDC_WE</td><td>1 &rarr; S'il s'est produit une erreur d'écriture.</td></tr>
</div>
<div style="margin-left:5%;">  <tr><td><center>6</center></td><td>F_SDC_RE</td><td>1 &rarr; S'il s'est produit une erreur de lecture.</td></tr>
</div>
<div style="margin-left:5%;">  <tr><td><center>7</center></td><td>F_SDC_IE</td><td>1 &rarr; S'il s'est prdouit une erreur d'initialisation.</td></tr>
</div>
<div style="margin-left:5%;">  <tr><td><center>8</center></td><td>F_BAD_CARD</td><td>1 &rarr; S'il n'y a pas de réponse de la carte.</td></tr>
</div>
<div style="margin-left:5%;">  </table><br>
</div>
</p>
<div style="margin-left:5%;"><b> arguments:
</b></div>
<div style="margin-left:5%;"><i>aucun
</i>&nbsp;&nbsp;</div>
<div style="margin-left:5%;"><b> retourne:
</b></div>
<div style="margin-left:5%;"><i>u</i>&nbsp;&nbsp;  État de la carte.    
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html">index principal</a></div>
<hr style="border-width:1px;"><p id="?SDCOK">
<b>?SDCOK</b>  ( -- n )    
<div style="margin-left:5%;">   Retourne la valeur du bit F_SDC_OK. La valeur 2 indique qu'il y a une carte
</div>
<div style="margin-left:5%;">   dans la fente et qu'elle est initialisée.    
</div>
</p>
<div style="margin-left:5%;"><b> arguments:
</b></div>
<div style="margin-left:5%;"><i>aucun
</i>&nbsp;&nbsp;</div>
<div style="margin-left:5%;"><b> retourne:
</b></div>
<div style="margin-left:5%;"><i>n</i>&nbsp;&nbsp; Valeur du bit F_SDC_OK &rarr; {0,2}.    
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html">index principal</a></div>
<hr style="border-width:1px;"><p id="SDCREAD">
<b>SDCREAD</b>  ( c-addr ud -- f )    
<div style="margin-left:5%;">   Lecture d'un secteur de la carte SD, bloc de 512 octets    
</div>
</p>
<div style="margin-left:5%;"><b>  arguments:
</b></div>
<div style="margin-left:5%;"><i>addr</i>&nbsp;&nbsp; Adresse du tampon RAM
</div>
<div style="margin-left:5%;"><i>ud</i>&nbsp;&nbsp;  Numéro du secteur sur la carte SD. 
</div>
<div style="margin-left:5%;"><b>  retourne:
</b></div>
<div style="margin-left:5%;"><i>f</i>&nbsp;&nbsp;  Indicateur booléen échec/succcès    
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html">index principal</a></div>
<hr style="border-width:1px;"><p id="SDCWRITE">
<b>SDCWRITE</b>   ( addr ud -- )   
<div style="margin-left:5%;">   Écriture d'un secteur de 512 octets sur la carte SD.
</div>
</p>
<div style="margin-left:5%;"><b> arguments:
</b></div>
<div style="margin-left:5%;"><i>addr</i>&nbsp;&nbsp; Adresse du tampon RAM des données à écrire.
</div>
<div style="margin-left:5%;"><i>ud	</i>&nbsp;&nbsp; Numéro du secteur la carte SD où effectuer l'écriture.
</div>
<div style="margin-left:5%;"><b> retourne:
</b></div>
<div style="margin-left:5%;"><i>rien</i>&nbsp;&nbsp;    
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html">index principal</a></div>
<hr style="border-width:1px;"><p id="SDBLKCOUNT">
<b>SDBLKCOUNT</b>  ( -- u )    
<div style="margin-left:5%;">   Constante, nombre maximal de blocs utilisés sur la carte SD
</div>
</p>
<div style="margin-left:5%;"><b> arguments:
</b></div>
<div style="margin-left:5%;"><i>aucun
</i>&nbsp;&nbsp;</div>
<div style="margin-left:5%;"><b> retourne:
</b></div>
<div style="margin-left:5%;"><i>u</i>&nbsp;&nbsp;   Nombre de blocs disponibles.    
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html">index principal</a></div>
<hr style="border-width:1px;"><p id="SDBOUND">
<b>SDBOUND</b>  ( n+ -- f)
<div style="margin-left:5%;">   Vérifie si le numéro de bloc est dans les limites
</div>
</p>
<div style="margin-left:5%;"><b> arguments:
</b></div>
<div style="margin-left:5%;"><i>n+</i>&nbsp;&nbsp;  Numéro du bloc à vérifier. {1..65535}
</div>
<div style="margin-left:5%;"><b> retourne:
</b></div>
<div style="margin-left:5%;"><i>f</i>&nbsp;&nbsp;   Indicateur booléen.
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html">index principal</a></div>
<hr style="border-width:1px;"><p id="SDBLK&gt;ADR">
<b>SDBLK&gt;ADR</b>  ( u -- ud )
<div style="margin-left:5%;">   Convertie un numéro de bloc de la carte SD en adresse absolue.
</div>
</p>
<div style="margin-left:5%;"><b> arguments:
</b></div>
<div style="margin-left:5%;"><i>u</i>&nbsp;&nbsp;    Numéro du bloc {1..65535}
</div>
<div style="margin-left:5%;"><b> retourne:
</b></div>
<div style="margin-left:5%;"><i>ud</i>&nbsp;&nbsp;   Adresse absolue de 32 bits sur la carte SD.
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html">index principal</a></div>
<hr style="border-width:1px;"><h4 id="index">Index</h4>
<p>
<ul>
<li><a href="#?SDC">?SDC</a></li>
<li><a href="#?SDCOK">?SDCOK</a></li>
<li><a href="#SDBLK&gt;ADR">SDBLK&gt;ADR</a></li>
<li><a href="#SDBLKCOUNT">SDBLKCOUNT</a></li>
<li><a href="#SDBOUND">SDBOUND</a></li>
<li><a href="#SDC-R">SDC-R</a></li>
<li><a href="#SDCINIT">SDCINIT</a></li>
<li><a href="#SDCREAD">SDCREAD</a></li>
<li><a href="#SDCWRITE">SDCWRITE</a></li>
</ul>
</p>
<hr style="border-width:1px;"><div><a href="#top">haut</a></div>
<div><a href="index.html">index principal</a></div>

</body>
</html>
