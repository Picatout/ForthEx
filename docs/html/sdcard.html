<DOCTYPE! html>
<html lang="fr-CA">
<head>
</head>
<body id="#top">
<h1>sdcard</h1><div><a href="#index">index</a></div>
<div><a href="index.html">index principal</a></div>
<h2 id="description">Description</h2><div style="margin-left:5%;">  
</div>
<div style="margin-left:5%;"> Interface de base pour l'accès à la carte SD en utilisant l'interface SPI de celle-ci.
</div>
<div style="margin-left:5%;"> Permet l'initialiation de la carte ainsi que la lecture et l'écriture d'un bloc de
</div>
<div style="margin-left:5%;"> donnée sur la carte.    
</div>
<div><a href="index.html">index principal</a></div>
<hr style="border-width:4px;"><p id="SDCINIT">
<b>SDCINIT</b> ( -- f )
<div style="margin-left:5%;">   Initialisation carte SD 
</div>
<div style="margin-left:5%;">REF: <a href=" http://elm-chan.org/docs/mmc/pic/sdinit.png    
"> http://elm-chan.org/docs/mmc/pic/sdinit.png    
</a></div>
</p>
<div style="margin-left:5%;"><b> arguments:
</b></div>
<div style="margin-left:5%;"><i>aucun
</i>&nbsp;&nbsp;</div>
<div style="margin-left:5%;"><b> retourne:
</b></div>
<div style="margin-left:5%;"><i>f</i>&nbsp;&nbsp;   Indicateur Booléen de succès.    
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html">index principal</a></div>
<hr style="border-width:1px;"><p id="?SDC">
<b>?SDC</b>  ( -- u )    
<div style="margin-left:5%;">   Retourne retourne un entier non signé contenant les indicateurs booléen suivants
</div>
<div style="margin-left:5%;">   - F_SDC_IN  bit 0, à 1 s'il y a une carte dans la fente.
</div>
<div style="margin-left:5%;">   - F_SDC_OK  bit 1, à 1 si une carte est insérée et initialisée.
</div>
<div style="margin-left:5%;">   - F_SDC_V2  bit 2, à 1 s'il s'agit de carte version 2.
</div>
<div style="margin-left:5%;">   - F_SDC_HC  bit 3, à 1 s'il s'agit d'une carte haute capacitée.
</div>
<div style="margin-left:5%;">   - F_SDC_TO  bit 4, à 1 si la dernière commande a expirée avant d'aboutir.
</div>
<div style="margin-left:5%;">   - F_SDC_WE  bit 5, à 1 s'il s'est produit une erreur d'écriture.
</div>
<div style="margin-left:5%;">   - F_SDC_RE  bit 6, à 1 s'il s'est produit une erreur de lecture.
</div>
<div style="margin-left:5%;">   - F_SDC_IE  bit 7, à 1 s'il s'est prdouit une erreur d'initialisation.
</div>
<div style="margin-left:5%;">   - F_BAD_CARD bit 8, à 1 s'il n'y a pas de réponse de la carte.
</div>
<div style="margin-left:5%;">   - F_BLK_ADDR bit 9, à 1 s'il s'agit d'une carte adressable par bloc.
</div>
</p>
<div style="margin-left:5%;"><b> arguments:
</b></div>
<div style="margin-left:5%;"><i>aucun
</i>&nbsp;&nbsp;</div>
<div style="margin-left:5%;"><b> retourne:
</b></div>
<div style="margin-left:5%;"><i>u</i>&nbsp;&nbsp;  État de la carte.    
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html">index principal</a></div>
<hr style="border-width:1px;"><p id="?SDCOK">
<b>?SDCOK</b>  ( -- n )    
<div style="margin-left:5%;">   Retourne la valeur du bit F_SDC_OK. 2 indique que la carte est prête.
</div>
</p>
<div style="margin-left:5%;"><b> arguments:
</b></div>
<div style="margin-left:5%;"><i>aucun
</i>&nbsp;&nbsp;</div>
<div style="margin-left:5%;"><b> retourne:
</b></div>
<div style="margin-left:5%;"><i>n</i>&nbsp;&nbsp; Valeur du bit F_SDC_OK {0,2}.    
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html">index principal</a></div>
<hr style="border-width:1px;"><p id="SDCREAD">
<b>SDCREAD</b>  ( c-addr ud -- f )    
<div style="margin-left:5%;">   Lecture d'un secteur de la carte SD, bloc de 512 octets    
</div>
</p>
<div style="margin-left:5%;"><b>  arguments:
</b></div>
<div style="margin-left:5%;"><i>addr</i>&nbsp;&nbsp; Adresse du tampon RAM
</div>
<div style="margin-left:5%;"><i>ud</i>&nbsp;&nbsp;  Numéro du secteur carte SD à lire. 
</div>
<div style="margin-left:5%;"><b>  retourne:
</b></div>
<div style="margin-left:5%;"><i>f</i>&nbsp;&nbsp;  Indicateur booléen échec/succcès    
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html">index principal</a></div>
<hr style="border-width:1px;"><p id="SDCWRITE">
<b>SDCWRITE</b>   ( addr ud -- )   
<div style="margin-left:5%;">   Écriture d'un secteur de 512 octest sur la carte SD.
</div>
</p>
<div style="margin-left:5%;"><b> arguments:
</b></div>
<div style="margin-left:5%;"><i>addr</i>&nbsp;&nbsp; Adresse du tampon RAM des données à écrire sur  la carte.
</div>
<div style="margin-left:5%;"><i>ud	</i>&nbsp;&nbsp; Numéro du secteur la carte SD où doit se faire l'écriture.
</div>
<div style="margin-left:5%;"><b> retourne:
</b></div>
<div style="margin-left:5%;"><i>rien</i>&nbsp;&nbsp;    
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html">index principal</a></div>
<hr style="border-width:1px;"><p id="NSECTOR">
<b>NSECTOR</b> ( u1 u2 ud -- u3 u4 ud' )    
<div style="margin-left:5%;">   Ajuste le compteur et le pointeur pour le secteur suivant.
</div>
</p>
<div style="margin-left:5%;"><b> arguments:
</b></div>
<div style="margin-left:5%;"><i>u1</i>&nbsp;&nbsp;  Adresse tampon RAM.
</div>
<div style="margin-left:5%;"><i>u2</i>&nbsp;&nbsp;  Nombre d'octets à lire ou écrire.
</div>
<div style="margin-left:5%;"><i>ud</i>&nbsp;&nbsp; Adresse sur la carte SD.    
</div>
<div style="margin-left:5%;"><b> retourne:
</b></div>
<div style="margin-left:5%;"><i>u3</i>&nbsp;&nbsp;  Adresse RAM incrémentée de BLOCK_SIZE
</div>
<div style="margin-left:5%;"><i>u4</i>&nbsp;&nbsp;  Nombre d'octets décrémentés de BLOCK_SIZE, MAX(0,u4') 
</div>
<div style="margin-left:5%;"><i>ud'</i>&nbsp;&nbsp; Adresse sur la carte .
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html">index principal</a></div>
<hr style="border-width:1px;"><p id="SDFIRST">
<b>SDFIRST</b> ; ( -- a-addr )
<div style="margin-left:5%;">    variable contenant l'adresse du premeir bloc utilisé sur la carte SD
</div>
</p>
<div style="margin-left:5%;"><b> arguments:
</b></div>
<div style="margin-left:5%;"><i>aucun
</i>&nbsp;&nbsp;</div>
<div style="margin-left:5%;"><b> retourne:
</b></div>
<div style="margin-left:5%;"><i>a-addr</i>&nbsp;&nbsp; Adresse de la variable
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html">index principal</a></div>
<hr style="border-width:1px;"><p id="SDBLKCOUNT">
<b>SDBLKCOUNT</b>  ( -- u )    
<div style="margin-left:5%;">   Constante, nombre maximal de blocs utilisés sur la carte SD
</div>
</p>
<div style="margin-left:5%;"><b> arguments:
</b></div>
<div style="margin-left:5%;"><i>aucun
</i>&nbsp;&nbsp;</div>
<div style="margin-left:5%;"><b> retourne:
</b></div>
<div style="margin-left:5%;"><i>u</i>&nbsp;&nbsp;   Nombre de blocs disponibles.    
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html">index principal</a></div>
<hr style="border-width:1px;"><p id="SDBOUND">
<b>SDBOUND</b>  ( n+ -- f)
<div style="margin-left:5%;">   Vérifie si le numéro de bloc est dans les limites
</div>
</p>
<div style="margin-left:5%;"><b> arguments:
</b></div>
<div style="margin-left:5%;"><i>n+</i>&nbsp;&nbsp;  Numéro du bloc à vérifier. {1..65535}
</div>
<div style="margin-left:5%;"><b> retourne:
</b></div>
<div style="margin-left:5%;"><i>f</i>&nbsp;&nbsp;   Indicateur booléen.
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html">index principal</a></div>
<hr style="border-width:1px;"><p id="SDBLK&gt;ADR">
<b>SDBLK&gt;ADR</b>  ( u -- ud )
<div style="margin-left:5%;">   Convertie un numéro de bloc de la carte SD en adresse absolue.
</div>
</p>
<div style="margin-left:5%;"><b> arguments:
</b></div>
<div style="margin-left:5%;"><i>u</i>&nbsp;&nbsp;    Numéro du bloc {1..65535}
</div>
<div style="margin-left:5%;"><b> retourne:
</b></div>
<div style="margin-left:5%;"><i>ud</i>&nbsp;&nbsp;   Adresse absolue de 32 bits sur la carte SD.
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html">index principal</a></div>
<hr style="border-width:1px;"><h4 id="index">Index</h4>
<p>
<ul>
<li><a href="#?SDC">?SDC</a></li>
<li><a href="#?SDCOK">?SDCOK</a></li>
<li><a href="#NSECTOR">NSECTOR</a></li>
<li><a href="#SDBLK&gt;ADR">SDBLK&gt;ADR</a></li>
<li><a href="#SDBLKCOUNT">SDBLKCOUNT</a></li>
<li><a href="#SDBOUND">SDBOUND</a></li>
<li><a href="#SDCINIT">SDCINIT</a></li>
<li><a href="#SDCREAD">SDCREAD</a></li>
<li><a href="#SDCWRITE">SDCWRITE</a></li>
<li><a href="#SDFIRST">SDFIRST</a></li>
</ul>
</p>
<hr style="border-width:1px;"><div><a href="#top">haut</a></div>
<div><a href="index.html">index principal</a></div>

</body>
</html>
