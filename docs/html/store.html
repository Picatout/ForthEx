<DOCTYPE! html>
<html lang="fr-CA">
<head>
 <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
 <link rel="stylesheet" type="text/css" href="css/forthex.css"></head>
<body id="#top">
<h1>store</h1><div><a href="#index">index</a></div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<h2 id="description">Description</h2><div>  
</div>
<div> Interface de base avec les mémoire externe RAM SPI et EEPROM SPI.
</div>
<div> Le terme XRAM réfère à la mémoire RAM SPI 23LC1024.
</div>
<div> Le terme EEPROM réfère à la mémoire EEPROM SPI 25LC1024.    
</div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<hr style="border-width:4px;"><h2 id="description">Description</h2><div>
</div>
<div>  La RAM SPI 23LC1024 a une capacitée de 128Ko.    
</div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<hr style="border-width:4px;"><p id="RAM&gt;XR">
<b>RAM&gt;XR</b> ( u1 u2 ud1 -- )
<br><div>   Transfert un bloc d'octets de la RAM du MCU vers la XRAM.
</div>
</p>
<div><b> arguments: 
</b></div>
<div><i>u1</i>&nbsp;&nbsp; Adresse début bloc dans la XRAM.
</div>
<div><i>u2</i>&nbsp;&nbsp; Nombre d'octets à transférer.
</div>
<div><i>ud1</i>&nbsp;&nbsp; Entier double non signé, Adresse destination dans la XRAM. 
</div>
<div><b> retourne:    
</b></div>
<div><i>rien
</i>&nbsp;&nbsp;</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<hr style="border-width:1px;"><p id="XR&gt;RAM">
<b>XR&gt;RAM</b>  ( u1 u2 ud1 -- )
<br><div>   Transfert un bloc d'octets de la XRAM vers la RAM du MCU.
</div>
</p>
<div><b> arguments: 
</b></div>
<div><i>u1</i>&nbsp;&nbsp;  Entier simple non signé, adresse début tampon RAM.
</div>
<div><i>u2</i>&nbsp;&nbsp;  Entier simple non signé, Nombre d'octets à transféréer.
</div>
<div><i>ud1</i>&nbsp;&nbsp; Entier double non signé, adresse début du bloc dans la XRAM.
</div>
<div><b> retourne:    
</b></div>
<div><i>rien
</i>&nbsp;&nbsp;</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<hr style="border-width:1px;"><h2 id="description">Description</h2><div>
</div>
<div>   l'EEPROM 25LC1024 a une capacité de 128Ko et est divisée en 
</div>
<div>   512 rangées de 256 octets pour la commande EWRITE.
</div>
<div>   Il est possible de mette à jour 1 seul octet mais
</div>
<div>   on ne peut écrire qu'un maximum de 
</div>
<div>   256 octets par commande EWRITE.    
</div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<hr style="border-width:4px;"><p id="?WIP">
<b>?WIP</b>  ( -- f )    
<br><div>   Test le bit WRITE IN PROCESS de l'EEPROM et retourne son état.
</div>
</p>
<div><b> arguments:
</b></div>
<div><i>aucun
</i>&nbsp;&nbsp;</div>
<div><b> retourne:
</b></div>
<div><i>f</i>&nbsp;&nbsp;   Indicateur Booléen, VRAI si une opération d'écriture est en cour.    
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<hr style="border-width:1px;"><p id="WWIP">
<b>WWIP</b>   ( -- )    
<br><div>   Attend que l'opération d'écriture de l'EEPROM soit complétée.
</div>
</p>
<div><b> arguments:
</b></div>
<div><i>aucun
</i>&nbsp;&nbsp;</div>
<div><b> retourne:
</b></div>
<div><i>rien</i>&nbsp;&nbsp;    
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<hr style="border-width:1px;"><p id="RAM&gt;EE">
<b>RAM&gt;EE</b> ( u1 n+ ud1 -- )
<br><div>   Enregistrement d'une plage RAM dans l'EEPROM
</div>
<div> IMPORTANT:
</div>
<div>     la mémoire EEPROM est divisée en
</div>
<div>     rangées de 256 octets. Lorsque le pointeur
</div>
<div>     d'adresse atteint la fin d'une rangée il 
</div>
<div>     revient au début de celle-ci. Donc si 'ud1'
</div>
<div>     pointe le début de la rangée un maximum de 256
</div>
<div>     octets peuvent-être écris avant l'écrasement
</div>
<div>     des premiers octets. 
</div>
</p>
<div><b> arguments: 
</b></div>
<div><i>u1</i>&nbsp;&nbsp; Entier simple, adresse 16 bits début bloc RAM
</div>
<div><i>n+</i>&nbsp;&nbsp; Entier simple positif, nombre d'octets à enregistrer {1..256} 
</div>
<div><i>ud2</i>&nbsp;&nbsp; Entier double non signé, adresse destination dans l'EEPROM
</div>
<div><b> retourne: 
</b></div>
<div><i>rien
</i>&nbsp;&nbsp;</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<hr style="border-width:1px;"><p id="EE&gt;RAM">
<b>EE&gt;RAM</b>   ( u1 u2 ud -- )
<br><div>   Copie d'une plage EEPROM vers la mémoire RAM.
</div>
</p>
<div><b> arguments:
</b></div>
<div><i>u1</i>&nbsp;&nbsp; Entier simple non signé, adresse début tampon RAM.
</div>
<div><i>u2</i>&nbsp;&nbsp; Entier simple non signé, nombre d'octets à copier. 
</div>
<div><i>ud</i>&nbsp;&nbsp; Entier double non signé, adresse source dans l'EEPROM.
</div>
<div><b> retourne:
</b></div>
<div><i>rien</i>&nbsp;&nbsp;    
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<hr style="border-width:1px;"><p id="EPAGE">
<b>EPAGE</b>  ( -- n )
<br><div>   Valeur constante indiquant qu'il s'agit d'une opération d'effacement d'une page.
</div>
<div>   L'EEPROM peut-être effacée par page,secteur ou au complet. 
</div>
</p>
<div><b> arguments:
</b></div>
<div><i>aucun
</i>&nbsp;&nbsp;</div>
<div><b> retourne:
</b></div>
<div><i>n</i>&nbsp;&nbsp;     Consteante idenfiant cette opération.    
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<hr style="border-width:1px;"><p id="ESECTOR">
<b>ESECTOR</b>  ( -- n )
<br><div>   Valeur constante indiquant qu'il s'agit d'une opération d'effacement d'un secteur.
</div>
<div>   L'EEPROM peut-être effacée par page,secteur ou au complet. 
</div>
</p>
<div><b> arguments:
</b></div>
<div><i>aucun
</i>&nbsp;&nbsp;</div>
<div><b> retourne:
</b></div>
<div><i>n</i>&nbsp;&nbsp;     Constante idenfiant cette opération.    
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<hr style="border-width:1px;"><p id="EALL">
<b>EALL</b>  ( -- n )
<br><div>   Valeur constante indiquant qu'il s'agit d'une opération d'effacement complet.
</div>
<div>   Toute l'EEPROM sera effacée.    
</div>
</p>
<div><b> arguments:
</b></div>
<div><i>aucun
</i>&nbsp;&nbsp;</div>
<div><b> retourne:
</b></div>
<div><i>n</i>&nbsp;&nbsp;     Consteante idenfiant cette opération.    
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<hr style="border-width:1px;"><p id="EERASE">
<b>EERASE</b> ( EALL | n {EPAGE|ESECTOR} -- )    
<br><div>   Efface une page, 1 secteur ou l'EEPROM au complet.
</div>
<div>   l'argument 'n' est requis que pour les opérations EPAGE ou ESECTOR.    
</div>
</p>
<div><b> arguments:
</b></div>
<div><i>'n'</i>&nbsp;&nbsp; Numéro de page {0..511} ou de secteur {0..3}
</div>
<div><i>'op'</i>&nbsp;&nbsp; Opération: {EPAGE|ESECTOR|EALL}
</div>
<div><b> retourne:
</b></div>
<div><i>rien</i>&nbsp;&nbsp;    
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<hr style="border-width:1px;"><p id="EEWRITE">
<b>EEWRITE</b>  ( u1 ud -- )    
<br><div>   Écriture d'un bloc RAM dans l'EEPROM externe.
</div>
<div>   L'écriture se fait par segment de 256 octets. 
</div>
<div>   Un bloc compte 1024 octets.    
</div>
</p>
<div><b> arguments:
</b></div>
<div><i>u1</i>&nbsp;&nbsp; Entier simple non signé, adresse RAM début du bloc.
</div>
<div><i>ud</i>&nbsp;&nbsp; Entier double non signé, adresse début dans l'EEPROM.
</div>
<div><b> retourne:
</b></div>
<div><i>rien</i>&nbsp;&nbsp;    
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<hr style="border-width:1px;"><p id="XRAM">
<b>XRAM</b>   ( -- a-addr )  
<br><div>   Retourne l'adresse du descripteur du périphérique RAM SPI.    
</div>
</p>
<div><b> arguments:
</b></div>
<div><i>aucun
</i>&nbsp;&nbsp;</div>
<div><b> retourne:
</b></div>
<div><i>a-addr</i>&nbsp;&nbsp;   Adresse du descripteur de périphérique XRAM.  
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<hr style="border-width:1px;"><p id="EEPROM">
<b>EEPROM</b>   ( -- a-addr )  
<br><div>   Retourne l'adresse du descripteur du périphérique EEPROM.    
</div>
</p>
<div><b> arguments:
</b></div>
<div><i>aucun
</i>&nbsp;&nbsp;</div>
<div><b> retourne:
</b></div>
<div><i>a-addr</i>&nbsp;&nbsp;   Adresse du descripteur de périphérique EEPROM  
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<hr style="border-width:1px;"><h4 id="index">Index</h4>
<p>
<ul>
<li><a href="#?WIP">?WIP</a></li>
<li><a href="#EALL">EALL</a></li>
<li><a href="#EE&gt;RAM">EE&gt;RAM</a></li>
<li><a href="#EEPROM">EEPROM</a></li>
<li><a href="#EERASE">EERASE</a></li>
<li><a href="#EEWRITE">EEWRITE</a></li>
<li><a href="#EPAGE">EPAGE</a></li>
<li><a href="#ESECTOR">ESECTOR</a></li>
<li><a href="#RAM&gt;EE">RAM&gt;EE</a></li>
<li><a href="#RAM&gt;XR">RAM&gt;XR</a></li>
<li><a href="#WWIP">WWIP</a></li>
<li><a href="#XR&gt;RAM">XR&gt;RAM</a></li>
<li><a href="#XRAM">XRAM</a></li>
</ul>
</p>
<hr style="border-width:1px;"><div><a href="#top">haut</a></div>
<div><a href="index.html#MasterIndex">index principal</a></div>

</body>
</html>
