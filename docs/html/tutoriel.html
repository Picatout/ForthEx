<DOCTYPE! html>
<html lang="fr-CA">
<head>
<style>
p{
	margin-left:5%;
	width:90%;
}
hr{
	margin-left:5%;
	width:90%;
	border-width:4px;
}
div{
	margin-left:5%;
	width:90%;
	padding:5px;
}
</style>	
</head>
<body>
<h2>Présentation</h2>
<p>
	Ce tutoriel consiste à décrire toutes les étapes de la création d'un jeux vidéo simple, le classique 
	<a href="https://fr.wikipedia.org/wiki/Snake_(jeu_vid%C3%A9o)">Snake</a>. Il existe plusieurs variantes de ce jeux.
	Comme il s'agit d'un tutoriel sur le langage Forth, cette version sera simple. 

</p>
<h3>règles du jeux</h3>
<p>
	<ol>
		<li>Le serpent ne doit pas toucher à la bordure de l'aire de jeux.</li>
		<li>Le serpent ne doit pas se mordre lui-même.</li>
		<li>Le serpent mange les pastilles qui apparaîssent dans l'aire de jeux.</li>
		<li>Le pointage correspond à la longueur du serpent.</li>
		<li>Lorsque le serpent mange une pastille il s'allonge.</li>
		<li>Le serpent raccourci lorsqu'il manque de nourriture.</li>
		<li>Le serpent peut mourrir de faim, s'il ne mange pas assez rapidement les pastilles.</li>
		<li>Le serpent est toujours en mouvement mais sa direction est contrôlée par les 4 flèches.</li>
	</ol>
</p>
<h3>L'aire de jeux</h3>
<p>Le pourtour de l'écran est circonsris par une ligne blanche, le serpent est donc limité à une surface de 62 par 22 pixels. 
   Puisqu'il s'agit d'un écran texte, les pixels ici sont représentés par l'espace d'un caractère. Sur la première ligne de
   l'écran s'affiche le pointage, et un compte à rebours qui indique combien de secondes de vie le serpent dispose s'il ne
   mange pas. Ce compte augment chaque fois qu'il mange.</p>
<h3>Analyse du programme.</h3>   
<p>Essayons de voir de quoi nous avons besoins pour réaliser ce jeux.</p>
<h4>Variables</h4>
<p>
	<ul>
		<div><li><b>SCORE</b>, Cette variable contient le pointage qui est aussi la longueur du serpent.</li></div>
		<div><li><b>LIFE</b>, Cette variable contient l'espérance de vie du serpent en fonction de son niveau d'alimentation. 
		Un grand serpent nécessite plus de nourriture qu'un petit, il brûle ses calories plus rapidement.</li></div>
		<div><li><b>SNAKE</b>, Le corps du serpent doit-être représenté par un tableau (vecteur). Chaque élément de ce tableau
		contient les coordonnées de chaque caractère qui consistue le corps du serpent.</li></div>
		<div><li><b>HEAD</b>, Cette variable indique la direction de déplacement de la tête du serpent. Nous voulons que la tête
		du serpent ressemble à une bouche ouverte, nous allons donc utiliser un caractère différent pour chaque direction.
		<table border="single">
			<tr><th>direction</th><th>valeur</th><th>car. tête</th></tr>
			<tr><td>droite</td><td>0</td><td>&lt;</td></tr>
			<tr><td>bas</td><td>1</td><td>W</td></tr>
			<tr><td>gauche</td><td>2</td><td>&gt;</td></tr>
			<tr><td>haut</td><td>3</td><td>M</td></tr>
		</table>
		</li></div>
		<div><li><b>C_HEAD</b>, Il s'agit d'un tableau de 4 caractères qui va nous permettre d'obtenir le caractère à afficher
		pour la tête en fonction de la direction. On obtiendra le bon caractère en indiçant le tableau avec la valeur de la variable
	    <b>HEAD</b>.</li></div>
	    <div><li><b>FOOD</b>, Cette variable contient les coordonnées de la pastille de nourriture. Lorsque la pastille est avalée par le serpent
	    les coordonnées sont remises à {0,0}.</li></div>
	    <div><li><b>TAIL</b>, Nous avons besoin de savoir où était le dernier anneau du serpent avant sont dernier déplacement.
	    Cette information va nous permettre d'effacer cet anneau après le déplacement.</li></div>
	    <div><li><b>METAB</b>, Cette variable détermine la vitesse du métabolisme du serpent, augmente avec la longueur du serpent.</li></div>
	</ul>
</p>   
<p>
	Le corps du serpent et les pastilles de nourritures seront représentés par le caractère <b>O</b>.<br>
	Dans cette version simple du jeux le serpent va toujours se déplacer à la même vitesse. Le délais de boucle sera donc déterminé
	par une constante dont la valeur sera fixée plus tard dans le développement.
</p>
<h3>Déroulement du progamme (algorithme)</h3>
<p>
	<ol>
		<div><li>Initialisation des variables.</li></div>
		<div><li>Dessin de l'aire de jeux.</li></div>
		<div><li>Dessin du serpent (début boucle de la partie).</li></div>
		<div><li>Affichage du status (pointage et compte à rebours).</li></div>
		<div><li>S'il n'y a pas de pastille dans l'aire de jeux, en générer une dont les coordonnées sont choisies au hasard.</li></div>
		<div><li>Déplacer le serpent d'une position.</li></div>
		<div><li>Délais de la boucle de jeux (contrôle la vitesse du serpent).</li></div>
		<div><li>Vérification de collision avec le mur ou avec lui-même. Si collision terminer partie.</li></div>
		<div><li>Mise à jour du compte à rebours, si zéro terminer la partie.</li></div>
		<div><li>Vérifier si la tête du serpent a gober la pastille, si oui allonger le serpent.</li></div>
		<div><li>Lecture du clavier et mise à jour de la direction si nécessaire.</li></div>
		<div><li>Retourne à l'étape 3.</li></div>
	</ol>
</p>  
<h3>Débutons le codage</h3>
<p>
	À ce point çi nous disposons suffisamment d'information pour débuter l'écriture du code. Si nous avons manquer un point nous nous ajusterons en
	cours de route. Mais d'abord il faut répondre à quelques questions.
	<ul>
	<div><li>Quel sera la longueur initiale du serpent?</li></div>	
	<div><li>Est-ce que le serpent a une position et une direction initiale fixes, où laissons-nous ça au hasard.</li></div>
	<div><li>Quel est la relation entre les variables <b>SCORE</b>, <B>LIFE</B>, <B>DECAY</B>?</li></div>
	</ul>
	On a dit que plus le serpent est long plus il brûle ses calories rapidement donc <b>DECAY</b> est proportionnel à longueur du serpent. Par contre
	la valeur de <b>LIFE</b> peut-être une valeur fixe mais de combien allons augmenter cette valeur lorsque le serpent avale une pastille? Il est difficile
	de répondre a des questions, car ces valeurs influences directement la dynamique du jeux. Nous allons fixer ces valeurs pour le moment et nous ajuster
	en cours de route. Commençons par créer les variables.
</p>
<p>
	<div>\ création des variables, elles sont inialisée à 0 lors de leur création.</div>
	<div>VARIABLE SCORE \ pointage</div>
	<div>VARIABLE LIFE \ espérance de vie</div>
	<div>VARIABLE METAB \ vitesse du métabolisme du serpent.</div>
	<div>VARIABLE HEAD \ Indique la direction de déplacement de la tête du serpent.</div>
	<div>VARIABLE FOOD \ Contient les coordonnées de la pastille de nourriture.</div>
	<div>VARIABLE TAIL \ contient les coordonnées de la queue du serpent.</div>
</p>
<p>
	Il nous reste encore 2 variables à créer mais ces variables sont de type tableau (quoique je préfère le mot vecteur). Avant de créer ces 2 variables vecteurs
	je vais définir un mot particulier appellé VECTOR. Ce mot est un mot qui sert à créer d'autres mots, ou si vous préférez il sert à créer un classe de mots de
	la même manière que le mot <b>VARIABLE</b> nous a permis de créer des objets de type <i>variable</i>, le mot <b>VECTOR</b> va nous permettre de créer des <i>tableaux</i>.
	<div>: VECTOR CREATE CELLS ALLOT DOES&gt; SWAP CELLS + ;</div>
</p> 
<p>
	La création du mot VECTOR fait appel à un concept avancé du langage Forth, je vais donc prendre le temps d'expliquer en détail de quoi il s'agit.
	La définition commence par le mot <b>:</b> . Ce mot extrait le mot qui suis du flux d'entrée, dans ce cas si il s'agit du mot <b>VECTOR</b> et cré une
	nouvelle entrée dans le dictionnaire qui porte ce nom. Ensuite la valeur de la variable système STATE est modifiée pour indiquer qu'à partir de maintenant
	les mots qui suivent doivent-être compilés comme étant la définition du mot qui vient d'être ajouté dans le dictionnaire. Donc les mots <b>CREATE</b>,
	<B>CELLS</B> et <B>ALLOT</B> seront compilés plutôt qu'exécutés. Par contre le mot <b>DOES&gt;</b> est un mot <i>immédiat</i>. Les mots immmédiats sont
	exécutés même lorsque l'interpréteur est en mode compilation. Le mot <b>DOES&gt;</b> est difficile à comprendre. En gros il termine la définition en
	cours de compilation. Dans ce cas çi il s'agit de la définition de <b>VECTOR</b> et commence à compiler une nouvelle définition anomyme composées des mots
	qui le suivents jusqu'au <b>;</b>. Le mot <b>;</b> termine une compilation débutée avec le mot <b>:</b> et remet la variable STATE à zéro ce qui signifit
	qu'on repasse en mode interprétation. Ce code anomyme compilé par <b>DOES&gt;</b> est le code qui va être exécuté par les mots qui seront créés par le mot
	<b>VECTOR</b>.
</p>
<p>
	Donc lorsque l'interpréteur à terminé la lecture de cette ligne on a un nouveau mot dans le dictionnaire, <b>VECTOR</b> et on va se servir de ce mot
	pour créer des variables de type TABLEAU.
	<div>64 VECTOR SNAKE \ Cette variable tableau de 64 éléments va contenir les coordonnées de chaque anneau du serpent.</div>
	<div>4 VECTOR C_HEAD \ Cette variable tableau de 4 éléments va contenir les caractères de la tête du serpent.</div>
</p>	
</body>
</html>
	
