<DOCTYPE! html>
<html lang="fr-CA">
<head>
 <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
 <link rel="stylesheet" type="text/css" href="css/forthex.css"></head>
<body id="#top">
<h1>block</h1><div><a href="#index">index</a></div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<h2 id="description">Description</h2><div> 
</div>
<div>   Implémentation des mots de gestion de fichiers par blocs.
</div>
<div>REF: <a href=" http://lars.nocrew.org/forth2012/block.html
"> http://lars.nocrew.org/forth2012/block.html
</a></div>
<div>REF: <a href=" http://lars.nocrew.org/dpans/dpans7.htm#7.6.1    
"> http://lars.nocrew.org/dpans/dpans7.htm#7.6.1    
</a></div>
<div> NOTES:
</div>
<div>  1) Les blocs sont de 1024 caractères par tradition car à l'époque où
</div>
<div>     Charles Moore a développé ce système il l'utilisait pour stocker
</div>
<div>     les écrans du moniteur sous forme de texte source. Le moniteur qu'il
</div>
<div>     utilisait affichait 16 lignes de 64 caractères donc 1024 caractères.
</div>
<div>     Son éditeur de texte fonctionnait par pages écran.
</div>
<div>    
</div>
<div>  2) La numérotation des blocs de stockage commence à 1.     
</div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<hr style="border-width:4px;"><p id="BLK">
<b>BLK</b>   ( -- a-addr)  
<div>   Variable qui contient le no de bloc actuellement interprété.
</div>
</p>
<div><b> arguments:
</b></div>
<div><i>aucun
</i>&nbsp;&nbsp;</div>
<div><b> retourne:
</b></div>
<div><i>a-addr</i>&nbsp;&nbsp;  adresse de la variable _blk
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<hr style="border-width:1px;"><p id="SCR">
<b>SCR</b> ( -- a-addr )
<div>   variable contenant le dernier numéro de bloc affiché à l'écran.
</div>
</p>
<div><b> arguments:
</b></div>
<div><i>aucun</i>&nbsp;&nbsp;    
</div>
<div><b> retourne:
</b></div>
<div><i>a-addr</i>&nbsp;&nbsp;   adresse de la variable SCR.
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<hr style="border-width:1px;"><p id="BLKDEV">
<b>BLKDEV</b>  ( -- a-addr )
<div>    variable contenant l'adresse du descripteur du périphérique
</div>
<div>    de stockage actif.
</div>
</p>
<div><b> arguments:
</b></div>
<div><i>aucun
</i>&nbsp;&nbsp;</div>
<div><b> retourne:
</b></div>
<div><i>a-addr</i>&nbsp;&nbsp;  Adresse de la variable BLKDEV
</div>
<div><i>HEADLESS</i>&nbsp;&nbsp; BLKDEV,CODE    
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<hr style="border-width:1px;"><p id="BUFFER">
<b>BUFFER</b>  ( n+ -- a-addr )
<div>   Retourne l'adresse d'un bloc de données. Si aucun buffer n'est disponible
</div>
<div>   libère celui qui à la plus petite valeur UPDATED.
</div>
<div>   Contrairement à BLOCK il n'y a pas de lecture du périphérique de stockage.
</div>
<div>   le contenu du buffer est mis à zéro.    
</div>
</p>
<div><b> arguments:
</b></div>
<div><i>n+</i>&nbsp;&nbsp;    numéro du bloc.
</div>
<div><b> retourne:
</b></div>
<div><i>a-addr</i>&nbsp;&nbsp;   Adresse début de la zone de données.
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<hr style="border-width:1px;"><p id="BLOCK">
<b>BLOCK</b>  ( n+ -- a-addr )
<div>   Lit un bloc d'un périphérique de stockage vers un buffer. Libère un buffer au besoin.
</div>
<div>   Le périphérique est celui déterminé par la variable BLKDEV.    
</div>
</p>
<div><b> arguments:
</b></div>
<div><i>n+</i>&nbsp;&nbsp;   no. du bloc requis.
</div>
<div><b> retourne:    
</b></div>
<div><i>a-addr</i>&nbsp;&nbsp;  Adresse du début de la zone de données.    
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<hr style="border-width:1px;"><p id="LOAD">
<b>LOAD</b> ( i*x n+ -- j*x )
<div>   Évalue un bloc. Si le bloc n'est pas déjà dans un buffer il est chargé
</div>
<div>   à partir du périphérique désigné par BLKDEV. Le numéro du bloc évalué 
</div>
<div>   est enregistré dans la variable BLK.    
</div>
</p>
<div><b> arguments:
</b></div>
<div><i>i*x</i>&nbsp;&nbsp;  État de la pile des arguments avant l'évalutaion du bloc n+.    
</div>
<div><i>n+</i>&nbsp;&nbsp;   Numéro du bloc à évaluer.
</div>
<div><b> retourne:
</b></div>
<div><i>j*x</i>&nbsp;&nbsp;  État de la pile des arguments après l'évaluation du bloc n+.
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<hr style="border-width:1px;"><p id="SAVE-BUFFERS">
<b>SAVE-BUFFERS</b> ( -- )  
<div>   Sauvegarde tous les buffers qui ont été modifiés.
</div>
</p>
<div><b> arguments:
</b></div>
<div><i>aucun
</i>&nbsp;&nbsp;</div>
<div><b> retourne:
</b></div>
<div><i>rien
</i>&nbsp;&nbsp;</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<hr style="border-width:1px;"><p id="EMPTY-BUFFERS">
<b>EMPTY-BUFFERS</b>  ( -- )
<div>   Libère tous les buffers sans sauvegarder.
</div>
</p>
<div><b> arguments:
</b></div>
<div><i>aucun
</i>&nbsp;&nbsp;</div>
<div><b> retourne:
</b></div>
<div><i>rien</i>&nbsp;&nbsp; 
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<hr style="border-width:1px;"><p id="FLUSH">
<b>FLUSH</b> ( -- )
<div>   Sauvegarde tous les buffers et les libères.
</div>
</p>
<div><b> arguments:
</b></div>
<div><i>aucun
</i>&nbsp;&nbsp;</div>
<div><b> retourne:
</b></div>
<div><i>rien</i>&nbsp;&nbsp; 
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<hr style="border-width:1px;"><p id="LIST">
<b>LIST</b> ( n+ -- )
<div>   Affiche le contenu du bloc à l'écran. Si le bloc n'est pas déjà dans un buffer
</div>
<div>   il est chargé à partir du périphérique désigné par BLKDEV. L'affichage s'arrête
</div>
<div>   sitôt qu'un caractère autre que 32..126|VK_CR est rencontré.    
</div>
</p>
<div><b> arguments:
</b></div>
<div><i>n+</i>&nbsp;&nbsp;  numéro du bloc
</div>
<div><b> retourne:
</b></div>
<div><i>rien</i>&nbsp;&nbsp;    
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<hr style="border-width:1px;"><p id="THRU">
<b>THRU</b>  ( i*x u1 u2 -- j*x )
<div>   Interprétation des blocs u1 à u2 . LOAD est appellé pour chacun des blocs dans la séquence.
</div>
</p>
<div><b> arguments:
</b></div>
<div><i>i*x</i>&nbsp;&nbsp;  État initial de pile.
</div>
<div><i>u1</i>&nbsp;&nbsp;   premier bloc à interpréter.
</div>
<div><i>u2</i>&nbsp;&nbsp;   dernier bloc à interpréter.
</div>
<div><b> retourne:
</b></div>
<div><i>j*x</i>&nbsp;&nbsp;  État de la pile après l'interprétation des blocs.
</div>
<div><a href="#index">index</a></div>
<div><a href="#top">haut</a></div>
<div><a href="index.html#MasterIndex">index principal</a></div>
<hr style="border-width:1px;"><h4 id="index">Index</h4>
<p>
<ul>
<li><a href="#BLK">BLK</a></li>
<li><a href="#BLKDEV">BLKDEV</a></li>
<li><a href="#BLOCK">BLOCK</a></li>
<li><a href="#BUFFER">BUFFER</a></li>
<li><a href="#EMPTY-BUFFERS">EMPTY-BUFFERS</a></li>
<li><a href="#FLUSH">FLUSH</a></li>
<li><a href="#LIST">LIST</a></li>
<li><a href="#LOAD">LOAD</a></li>
<li><a href="#SAVE-BUFFERS">SAVE-BUFFERS</a></li>
<li><a href="#SCR">SCR</a></li>
<li><a href="#THRU">THRU</a></li>
</ul>
</p>
<hr style="border-width:1px;"><div><a href="#top">haut</a></div>
<div><a href="index.html#MasterIndex">index principal</a></div>

</body>
</html>
